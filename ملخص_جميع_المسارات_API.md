# ๐ ููุฎุต ุฌููุน ูุณุงุฑุงุช API

## ๐ ูุงุนุฏุฉ ุงููุณุงุฑุงุช

ุฌููุน ุงููุณุงุฑุงุช ุชุจุฏุฃ ุจู `/api/`

---

## ๐ Authentication - `/api/auth`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| POST | `/register` | ุนุงู | ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ |
| POST | `/login` | ุนุงู | ุชุณุฌูู ุงูุฏุฎูู |
| GET | `/me` | ูุญูู | ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู |
| PUT | `/profile` | ูุญูู | ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู |
| PUT | `/change-password` | ูุญูู | ุชุบููุฑ ูููุฉ ุงููุฑูุฑ |

---

## ๐ฆ Orders - `/api/orders`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| POST | `/` | ูุญูู | ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ |
| GET | `/` | ูุญูู | ุฌููุน ุงูุทูุจุงุช |
| GET | `/:id` | ูุญูู | ุทูุจ ูุญุฏุฏ |
| PUT | `/:id/status` | ูุญูู + admin | ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ |
| PUT | `/:id/assign-point` | ูุญูู + admin | ุชุนููู ููุทุฉ ุจูุน |
| GET | `/track/:orderNumber` | ุนุงู | ุชุชุจุน ุทูุจ |

---

## ๐๏ธ Products - `/api/products`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| POST | `/fetch-from-url` | ูุญูู | ุฌูุจ ุจูุงูุงุช ููุชุฌ ูู ุฑุงุจุท |
| POST | `/calculate-cost` | ูุญูู | ุญุณุงุจ ุชูููุฉ ุงูููุชุฌ |
| POST | `/validate-url` | ุนุงู | ุงูุชุญูู ูู ุตุญุฉ ุงูุฑุงุจุท |

---

## ๐ Cart - `/api/cart`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/` | ูุญูู | ุงูุญุตูู ุนูู ุงูุณูุฉ |
| POST | `/fetch-and-add` | ูุญูู | ุฌูุจ ูุฅุถุงูุฉ ููุชุฌ |
| PUT | `/items/:itemId/quantity` | ูุญูู | ุชุญุฏูุซ ุงููููุฉ |
| PUT | `/items/:itemId/options` | ูุญูู | ุชุญุฏูุซ ุฎูุงุฑุงุช ุงูููุชุฌ |
| DELETE | `/items/:itemId` | ูุญูู | ุญุฐู ููุชุฌ |
| DELETE | `/clear` | ูุญูู | ุชูุฑูุบ ุงูุณูุฉ |
| POST | `/checkout` | ูุญูู | ุฅุชูุงู ุงูุทูุจ |

---

## ๐ Smart Cart Orders - `/api/smart-cart-orders`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| POST | `/` | ูุญูู | ุฅูุดุงุก ุทูุจ ูู ุงูุณูุฉ |
| GET | `/` | ูุญูู | ุฌููุน ุทูุจุงุช ุงูุณูุฉ |
| GET | `/:id` | ูุญูู | ุทูุจ ุณูุฉ ูุญุฏุฏ |
| PUT | `/:id` | ูุญูู | ุชุญุฏูุซ ุทูุจ ุงูุณูุฉ |
| PUT | `/:id/status` | ูุญูู | ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ |

---

## ๐ฅ Users - `/api/users`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/` | ูุญูู + admin | ุฌููุน ุงููุณุชุฎุฏููู |
| GET | `/:id` | ูุญูู + admin | ูุณุชุฎุฏู ูุญุฏุฏ |
| PUT | `/:id` | ูุญูู + admin | ุชุญุฏูุซ ูุณุชุฎุฏู |
| PATCH | `/:id/toggle-status` | ูุญูู + admin | ุชูุนูู/ุชุนุทูู |

---

## ๐ณ Payments - `/api/payments`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| POST | `/cashpay/create` | ูุญูู | ุฅูุดุงุก ุฏูุนุฉ CashPay |
| GET | `/cashpay/callback` | ุนุงู | Callback ูู CashPay |
| POST | `/cashpay/webhook` | ุนุงู | Webhook ูู CashPay |
| GET | `/cashpay/verify/:paymentId` | ูุญูู | ุงูุชุญูู ูู ุฏูุนุฉ |
| POST | `/cashpay/refund/:paymentId` | ูุญูู + admin | ุงุณุชุฑุฏุงุฏ ุฏูุนุฉ |
| GET | `/stats` | ูุญูู + admin | ุฅุญุตุงุฆูุงุช ุงููุฏููุนุงุช |
| GET | `/` | ูุญูู + admin | ุฌููุน ุงููุฏููุนุงุช |
| GET | `/my/all` | ูุญูู | ูุฏููุนุงุชู |
| POST | `/` | ูุญูู | ุฅูุดุงุก ุฏูุนุฉ |
| GET | `/:id` | ูุญูู | ุฏูุนุฉ ูุญุฏุฏุฉ |
| PUT | `/:id/status` | ูุญูู + admin | ุชุญุฏูุซ ุญุงูุฉ ุงูุฏูุนุฉ |
| POST | `/:id/refund` | ูุญูู + admin | ุงุณุชุฑุฏุงุฏ |

---

## ๐ฎ Shipments - `/api/shipments`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/` | ูุญูู | ุฌููุน ุงูุดุญูุงุช |
| GET | `/:id` | ูุญูู | ุดุญูุฉ ูุญุฏุฏุฉ |
| POST | `/` | ูุญูู + admin | ุฅูุดุงุก ุดุญูุฉ |
| PUT | `/:id` | ูุญูู + admin | ุชุญุฏูุซ ุดุญูุฉ |
| PUT | `/:id/status` | ูุญูู + admin | ุชุญุฏูุซ ุญุงูุฉ ุงูุดุญูุฉ |

---

## ๐ Notifications - `/api/notifications`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/` | ูุญูู | ุฌููุน ุงูุฅุดุนุงุฑุงุช |
| GET | `/:id` | ูุญูู | ุฅุดุนุงุฑ ูุญุฏุฏ |
| PUT | `/:id/read` | ูุญูู | ุชุนููู ูููุฑูุก |
| PUT | `/read-all` | ูุญูู | ุชุนููู ุงููู ูููุฑูุก |
| DELETE | `/:id` | ูุญูู | ุญุฐู ุฅุดุนุงุฑ |

---

## โ๏ธ Settings - `/api/settings`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/public` | ุนุงู | ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ |
| GET | `/` | ุนุงู | ุฌููุน ุงูุฅุนุฏุงุฏุงุช |
| PUT | `/` | ูุญูู + admin | ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช |

---

## ๐ Stats - `/api/stats`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/dashboard` | ูุญูู + admin | ุฅุญุตุงุฆูุงุช ููุญุฉ ุงูุชุญูู |

---

## ๐ซ Coupons - `/api/coupons`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/` | ูุญูู + admin | ุฌููุน ุงูููุจููุงุช |
| GET | `/:id` | ูุญูู + admin | ููุจูู ูุญุฏุฏ |
| POST | `/` | ูุญูู + admin | ุฅูุดุงุก ููุจูู |
| PUT | `/:id` | ูุญูู + admin | ุชุญุฏูุซ ููุจูู |
| DELETE | `/:id` | ูุญูู + admin | ุญุฐู ููุจูู |
| POST | `/validate` | ูุญูู | ุงูุชุญูู ูู ููุจูู |

---

## ๐ฐ Stripe - `/api/stripe`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| POST | `/create-payment-intent` | ูุญูู | ุฅูุดุงุก ููุฉ ุฏูุน |
| POST | `/webhook` | ุนุงู | Webhook ูู Stripe |

---

## ๐ต Wallet - `/api/wallet`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/` | ูุญูู | ูุญูุธุชู |
| GET | `/transactions` | ูุญูู | ูุนุงููุงุชู |
| POST | `/redeem-code` | ูุญูู | ุงุณุชุจุฏุงู ููุฏ |
| GET | `/by-user` | ูุญูู + admin | ูุญูุธุฉ ูุณุชุฎุฏู |
| POST | `/codes` | ูุญูู + admin | ุฅูุดุงุก ููุฏ ูุญูุธุฉ |
| GET | `/codes` | ูุญูู + admin | ุฌููุน ุงูุฃููุงุฏ |
| GET | `/codes/export` | ูุญูู + admin | ุชุตุฏูุฑ ุงูุฃููุงุฏ |
| GET | `/codes/:codeId/qr` | ูุญูู + admin | QR ููุฏ |
| GET | `/all` | ูุญูู + admin | ุฌููุน ุงููุญุงูุธ |
| POST | `/adjust` | ูุญูู + admin | ุชุนุฏูู ุงูุฑุตูุฏ |
| GET | `/transactions/export` | ูุญูู | ุชุตุฏูุฑ ุงููุนุงููุงุช |
| GET | `/:walletId/transactions` | ูุญูู + admin | ูุนุงููุงุช ูุญูุธุฉ |

---

## ๐ช Point of Sale - `/api/pos`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/public` | ุนุงู | ููุงุท ุงูุจูุน ุงูุนุงูุฉ |
| GET | `/nearest` | ูุญูู | ุฃูุฑุจ ุงูููุงุท |
| GET | `/code/:code` | ุนุงู | ููุทุฉ ุจูุน ุจุงูููุฏ |
| GET | `/search-customer` | ูุญูู | ุงูุจุญุซ ุนู ุนููู |
| POST | `/` | ูุญูู + admin | ุฅูุดุงุก ููุทุฉ |
| GET | `/` | ูุญูู | ุฌููุน ุงูููุงุท |
| GET | `/my-point` | ูุญูู | ููุทุชู |
| POST | `/:id/distribute-codes` | ูุญูู + admin | ุชูุฒูุน ุฃููุงุฏ |
| GET | `/:id` | ูุญูู | ููุทุฉ ูุญุฏุฏุฉ |
| PUT | `/:id` | ูุญูู | ุชุญุฏูุซ ููุทุฉ |
| GET | `/:id/codes` | ูุญูู | ุฃููุงุฏ ุงูููุทุฉ |
| GET | `/:id/orders` | ูุญูู | ุทูุจุงุช ุงูููุทุฉ |
| POST | `/:id/sell-code` | ูุญูู | ุจูุน ููุฏ ููุนููู |
| POST | `/:id/return-code` | ูุญูู | ุฅุฑุฌุงุน ููุฏ |
| POST | `/:id/request-codes` | ูุญูู | ุทูุจ ุฃููุงุฏ |
| PUT | `/:id/orders/:orderId/ready` | ูุญูู | ุชุนููู ุทูุจ ุฌุงูุฒ |
| GET | `/:id/stats` | ูุญูู | ุฅุญุตุงุฆูุงุช ุงูููุทุฉ |
| GET | `/:id/admin-stats` | ูุญูู + admin | ุฅุญุตุงุฆูุงุช ุฅุฏุงุฑูุฉ |
| GET | `/:id/commissions` | ูุญูู | ุนูููุงุช ุงูููุทุฉ |
| DELETE | `/:id` | ูุญูู + admin | ุญุฐู ููุทุฉ |
| PATCH | `/:id/toggle-status` | ูุญูู + admin | ุชูุนูู/ุชุนุทูู |
| PUT | `/commissions/:commissionId` | ูุญูู + admin | ุชุญุฏูุซ ุนูููุฉ |
| PUT | `/orders/:orderId/confirm-pickup` | ูุญูู | ุชุฃููุฏ ุงูุงุณุชูุงู |

---

## ๐จโ๐ผ Agents - `/api/agents`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/me` | ูุญูู | ูููู ููููู |
| GET | `/payments/all` | ูุญูู + admin | ุฌููุน ูุฏููุนุงุช ุงููููุงุก |
| GET | `/payments/stats` | ูุญูู + admin | ุฅุญุตุงุฆูุงุช ูุฏููุนุงุช |
| POST | `/` | ูุญูู + admin | ุฅูุดุงุก ูููู |
| GET | `/` | ูุญูู + admin | ุฌููุน ุงููููุงุก |
| GET | `/stats/:id` | ูุญูู + admin | ุฅุญุตุงุฆูุงุช ูููู |
| GET | `/:id` | ูุญูู | ูููู ูุญุฏุฏ |
| PUT | `/:id` | ูุญูู + admin | ุชุญุฏูุซ ูููู |
| PATCH | `/:id/toggle-status` | ูุญูู + admin | ุชูุนูู/ุชุนุทูู |
| DELETE | `/:id` | ูุญูู + admin | ุญุฐู ูููู |
| GET | `/:id/stats` | ูุญูู | ุฅุญุตุงุฆูุงุช ูููู |

### ุนููุงุก ุงููููุงุก - `/api/agents/:agentId/customers`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| POST | `/` | ูุญูู | ุฅูุดุงุก ุนููู |
| GET | `/` | ูุญูู | ุฌููุน ุนููุงุก ุงููููู |
| GET | `/:customerId` | ูุญูู | ุนููู ูุญุฏุฏ |
| PUT | `/:customerId` | ูุญูู | ุชุญุฏูุซ ุนููู |
| DELETE | `/:customerId` | ูุญูู | ุญุฐู ุนููู |

### ุทูุจุงุช ุงููููุงุก - `/api/agents/:agentId/orders`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| POST | `/` | ูุญูู | ุฅูุดุงุก ุทูุจ |
| GET | `/` | ูุญูู | ุฌููุน ุทูุจุงุช ุงููููู |
| POST | `/batch-submit` | ูุญูู | ุฅุฑุณุงู ุทูุจุงุช ูุฌูุนุฉ |
| GET | `/:orderId` | ูุญูู | ุทูุจ ูุญุฏุฏ |
| PUT | `/:orderId/status` | ูุญูู | ุชุญุฏูุซ ุญุงูุฉ |
| POST | `/:orderId/customer-payment` | ูุญูู | ุชุณุฌูู ุฏูุน ุงูุนููู |
| POST | `/:orderId/submit` | ูุญูู | ุฅุฑุณุงู ุงูุทูุจ |
| POST | `/:orderId/agent-payment` | ูุญูู | ุชุณุฌูู ุฏูุน ุงููููู |

---

## ๐ฅ Health Check - `/api/health`

| Method | Endpoint | ุงูุญูุงูุฉ | ุงููุตู |
|--------|----------|---------|-------|
| GET | `/health` | ุนุงู | ูุญุต ุญุงูุฉ ุงูุณูุฑูุฑ |

---

## ๐ ููุงุญุธุงุช ูููุฉ

### ุงูุญูุงูุฉ:
- **ุนุงู**: ูุง ูุญุชุงุฌ ุชุณุฌูู ุฏุฎูู
- **ูุญูู**: ูุญุชุงุฌ JWT Token ูู Header: `Authorization: Bearer <token>`
- **admin**: ูุญุชุงุฌ JWT Token + ุตูุงุญูุฉ admin

### Rate Limiting:
- ูู ุงูุชุทููุฑ: ูุนุทู ุชูุฑูุจุงู
- ูู ุงูุฅูุชุงุฌ: ููุนูู ููุญูุงูุฉ

### CORS:
- ูุณููุญ: `localhost:5173` ู `FRONTEND_URL`
- ูุญุชุงุฌ: `credentials: true` ููู cookies

---

ุชู ุฅูุดุงุก ูุฐุง ุงูููุฎุต: {{ current_date }}






