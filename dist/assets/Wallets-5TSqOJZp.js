var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,r=(s,a,l)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,i=(e,s)=>{for(var a in s||(s={}))t.call(s,a)&&r(e,a,s[a]);if(l)for(var a of l(s))m.call(s,a)&&r(e,a,s[a]);return e},n=(e,s,a)=>new Promise((l,t)=>{var m=e=>{try{i(a.next(e))}catch(s){t(s)}},r=e=>{try{i(a.throw(e))}catch(s){t(s)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(m,r);i((a=a.apply(e,s)).next())});import{k as c,N as o,j as d,f as u,G as N,A as x,ac as b,l as p,M as g,L as y,$ as h}from"./index-Dfjzp2DE.js";import{r as j}from"./react-vendor-DBmefE3i.js";import{f as D,b as f}from"./helpers-B6CJClH3.js";import"./icons-DYE8NDaX.js";import"./utils-CZ_YNEkO.js";function v(){var e,l;const{success:t,error:m}=c(),[r,v]=j.useState([]),[w,C]=j.useState(!0),[E,W]=j.useState(""),[U,V]=j.useState({page:1,limit:20,total:0,pages:0}),[k,S]=j.useState(null),[O,P]=j.useState(!1),[F,A]=j.useState(""),[_,z]=j.useState(""),[I,M]=j.useState(!1),[$,B]=j.useState(null),[G,K]=j.useState(!1),[L,T]=j.useState([]),[q,H]=j.useState(!1);j.useEffect(()=>{J(U.page)},[U.page,E]);const J=(e=1)=>n(this,null,function*(){try{C(!0);const s=i({page:e,limit:20},E&&{search:E}),a=yield o.getAllWallets(s);v(a.data.wallets||[]),V(a.data.pagination||{page:1,limit:20,total:0,pages:0})}catch(s){}finally{C(!1)}}),Q=e=>n(this,null,function*(){try{H(!0);const s=yield o.getWalletTransactions(e,{page:1,limit:50});T(s.data.transactions||[])}catch(s){}finally{H(!1)}}),R=e=>n(this,null,function*(){var s,a;if(!F||parseFloat(F)<=0)return void m("يجب إدخال مبلغ أكبر من صفر");const l="increase"===e?parseFloat(F):-parseFloat(F);B(e),M(!0);try{(yield o.adjustBalance({walletId:k._id,amount:l,description:_.trim()||void 0})).data.success&&(t(`✅ تم ${"increase"===e?"زيادة":"نقصان"} الرصيد بنجاح!`),P(!1),A(""),z(""),B(null),S(null),J(U.page))}catch(r){m((null==(a=null==(s=r.response)?void 0:s.data)?void 0:a.message)||"فشل في تعديل الرصيد")}finally{M(!1)}}),X=e=>{S(e),K(!0),Q(e._id)},Y=e=>{switch(e){case"deposit":case"refund":case"adjustment":return d.jsxDEV(h,{className:"text-green-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:111,columnNumber:16},this);case"payment":case"withdraw":return d.jsxDEV(h,{className:"text-red-600 rotate-180"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:114,columnNumber:16},this);default:return d.jsxDEV(p,{className:"text-gray-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:116,columnNumber:16},this)}};return w&&0===r.length?d.jsxDEV("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxDEV(u,{className:"animate-spin text-xl md:text-2xl text-primary-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:134,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:133,columnNumber:7},this):d.jsxDEV("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[d.jsxDEV("div",{children:[d.jsxDEV("h1",{className:"text-lg md:text-xl font-bold text-gray-900 mb-1 md:mb-2",children:"المحافظ"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:143,columnNumber:9},this),d.jsxDEV("p",{className:"text-xs md:text-sm text-gray-600",children:"عرض وإدارة محافظ المستخدمين"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:144,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:142,columnNumber:7},this),d.jsxDEV("div",{className:"card p-3 md:p-4",children:d.jsxDEV("div",{className:"relative",children:[d.jsxDEV(N,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:150,columnNumber:11},this),d.jsxDEV("input",{type:"text",placeholder:"البحث برقم المحفظة...",value:E,onChange:e=>{W(e.target.value),V(e=>{return l=i({},e),s(l,a({page:1}));var l})},onKeyPress:e=>{"Enter"===e.key&&J(1)},className:"w-full pr-10 pl-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:151,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:149,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:148,columnNumber:7},this),d.jsxDEV("div",{className:"hidden lg:block card overflow-hidden",children:[d.jsxDEV("div",{className:"overflow-x-auto",children:d.jsxDEV("table",{className:"w-full",children:[d.jsxDEV("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxDEV("tr",{children:[d.jsxDEV("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700",children:"رقم المحفظة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:175,columnNumber:17},this),d.jsxDEV("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700",children:"المستخدم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:176,columnNumber:17},this),d.jsxDEV("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700",children:"الرصيد"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:177,columnNumber:17},this),d.jsxDEV("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700",children:"تاريخ الإنشاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:178,columnNumber:17},this),d.jsxDEV("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700",children:"الإجراءات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:179,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:174,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:173,columnNumber:13},this),d.jsxDEV("tbody",{className:"divide-y divide-gray-200",children:0===r.length?d.jsxDEV("tr",{children:d.jsxDEV("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"لا توجد محافظ"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:185,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:184,columnNumber:17},this):r.map(e=>{var s,a;return d.jsxDEV("tr",{className:"hover:bg-gray-50 transition-colors",children:[d.jsxDEV("td",{className:"px-4 py-3",children:d.jsxDEV("div",{className:"font-mono font-bold text-primary-600",children:e.walletNumber},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:193,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:192,columnNumber:21},this),d.jsxDEV("td",{className:"px-4 py-3",children:d.jsxDEV("div",{children:[d.jsxDEV("p",{className:"font-semibold text-sm",children:(null==(s=e.user)?void 0:s.name)||"غير محدد"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:197,columnNumber:25},this),d.jsxDEV("p",{className:"text-xs text-gray-500",children:null==(a=e.user)?void 0:a.email},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:198,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:196,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:195,columnNumber:21},this),d.jsxDEV("td",{className:"px-4 py-3",children:d.jsxDEV("span",{className:"text-lg font-bold text-primary-600",children:D(e.balance,e.currency)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:202,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:201,columnNumber:21},this),d.jsxDEV("td",{className:"px-4 py-3 text-sm text-gray-600",children:f(e.createdAt)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:206,columnNumber:21},this),d.jsxDEV("td",{className:"px-4 py-3",children:d.jsxDEV("div",{className:"flex items-center gap-2",children:[d.jsxDEV("button",{onClick:()=>X(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"عرض المعاملات",children:d.jsxDEV(x,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:216,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:211,columnNumber:25},this),d.jsxDEV("button",{onClick:()=>{S(e),P(!0)},className:"p-2 text-secondary-600 hover:bg-secondary-50 rounded-lg transition-colors",title:"تعديل الرصيد",children:d.jsxDEV(b,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:226,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:218,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:210,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:209,columnNumber:21},this)]},e._id,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:191,columnNumber:19},this)})},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:182,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:172,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:171,columnNumber:9},this),U.pages>1&&d.jsxDEV("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-between",children:[d.jsxDEV("div",{className:"text-sm text-gray-700",children:["عرض ",(U.page-1)*U.limit+1," إلى ",Math.min(U.page*U.limit,U.total)," من ",U.total]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:240,columnNumber:13},this),d.jsxDEV("div",{className:"flex gap-2",children:[d.jsxDEV("button",{onClick:()=>J(U.page-1),disabled:1===U.page,className:"px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:244,columnNumber:15},this),d.jsxDEV("button",{onClick:()=>J(U.page+1),disabled:U.page===U.pages,className:"px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:251,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:243,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:239,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:170,columnNumber:7},this),d.jsxDEV("div",{className:"lg:hidden space-y-3",children:[0===r.length?d.jsxDEV("div",{className:"card text-center py-8",children:[d.jsxDEV(p,{className:"text-3xl md:text-4xl text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:267,columnNumber:13},this),d.jsxDEV("p",{className:"text-lg text-gray-600",children:"لا توجد محافظ"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:268,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:266,columnNumber:11},this):r.map(e=>{var s,a;return d.jsxDEV("div",{className:"card p-4",children:[d.jsxDEV("div",{className:"flex items-start justify-between mb-3",children:d.jsxDEV("div",{className:"flex-1",children:[d.jsxDEV("p",{className:"font-mono font-bold text-primary-600 mb-1 text-sm",children:e.walletNumber},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:275,columnNumber:19},this),d.jsxDEV("p",{className:"text-lg font-bold text-primary-600",children:D(e.balance,e.currency)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:276,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:274,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:273,columnNumber:15},this),d.jsxDEV("div",{className:"mb-3 pt-3 border-t border-gray-200",children:[d.jsxDEV("p",{className:"text-xs text-gray-500 mb-1",children:"المستخدم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:283,columnNumber:17},this),d.jsxDEV("p",{className:"text-sm font-semibold",children:(null==(s=e.user)?void 0:s.name)||"غير محدد"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:284,columnNumber:17},this),d.jsxDEV("p",{className:"text-xs text-gray-500",children:null==(a=e.user)?void 0:a.email},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:285,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:282,columnNumber:15},this),d.jsxDEV("div",{className:"flex gap-2 pt-3 border-t border-gray-200",children:[d.jsxDEV("button",{onClick:()=>X(e),className:"flex-1 btn-secondary py-2 text-xs flex items-center justify-center gap-1",children:[d.jsxDEV(x,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:293,columnNumber:19},this),"المعاملات"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:289,columnNumber:17},this),d.jsxDEV("button",{onClick:()=>{S(e),P(!0)},className:"flex-1 btn-primary py-2 text-xs flex items-center justify-center gap-1",children:[d.jsxDEV(b,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:303,columnNumber:19},this),"تعديل"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:296,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:288,columnNumber:15},this)]},e._id,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:272,columnNumber:13},this)}),U.pages>1&&d.jsxDEV("div",{className:"flex items-center justify-between mt-4",children:[d.jsxDEV("button",{onClick:()=>J(U.page-1),disabled:1===U.page,className:"px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:314,columnNumber:13},this),d.jsxDEV("span",{className:"text-sm text-gray-700",children:["صفحة ",U.page," من ",U.pages]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:321,columnNumber:13},this),d.jsxDEV("button",{onClick:()=>J(U.page+1),disabled:U.page===U.pages,className:"px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:324,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:313,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:264,columnNumber:7},this),O&&k&&d.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxDEV("div",{className:"bg-white rounded-lg max-w-md w-full p-4 md:p-6",children:[d.jsxDEV("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"تعديل الرصيد"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:339,columnNumber:13},this),d.jsxDEV("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[d.jsxDEV("p",{className:"text-sm text-gray-600 mb-1",children:["المستخدم: ",null==(e=k.user)?void 0:e.name]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:341,columnNumber:15},this),d.jsxDEV("p",{className:"text-sm text-gray-600 mb-1",children:["المحفظة: ",k.walletNumber]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:342,columnNumber:15},this),d.jsxDEV("p",{className:"text-lg font-bold text-primary-600",children:["الرصيد الحالي: ",D(k.balance,k.currency)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:343,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:340,columnNumber:13},this),d.jsxDEV("div",{className:"space-y-4",children:[d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المبلغ (ريال سعودي) *"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:349,columnNumber:17},this),d.jsxDEV("input",{type:"number",value:F,onChange:e=>{const s=e.target.value;(""===s||!isNaN(s)&&parseFloat(s)>=0)&&A(s)},step:"0.01",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"أدخل المبلغ"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:352,columnNumber:17},this),d.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"أدخل المبلغ المراد تعديله"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:367,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:348,columnNumber:15},this),d.jsxDEV("div",{children:[d.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف (اختياري)"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:373,columnNumber:17},this),d.jsxDEV("textarea",{value:_,onChange:e=>z(e.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"سبب التعديل..."},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:376,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:372,columnNumber:15},this),d.jsxDEV("div",{className:"flex gap-3 mt-6",children:[d.jsxDEV("button",{type:"button",onClick:()=>R("increase"),disabled:I||!F||parseFloat(F)<=0,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[d.jsxDEV(g,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:392,columnNumber:19},this),I&&"increase"===$?"جاري الزيادة...":"زيادة"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:386,columnNumber:17},this),d.jsxDEV("button",{type:"button",onClick:()=>R("decrease"),disabled:I||!F||parseFloat(F)<=0,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[d.jsxDEV(y,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:401,columnNumber:19},this),I&&"decrease"===$?"جاري النقصان...":"نقصان"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:395,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:385,columnNumber:15},this),d.jsxDEV("div",{className:"flex gap-3 mt-2",children:d.jsxDEV("button",{type:"button",onClick:()=>{P(!1),S(null),A(""),z(""),B(null)},className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"إلغاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:407,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:406,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:347,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:338,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:337,columnNumber:9},this),G&&k&&d.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-4 md:p-6",children:[d.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[d.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:"معاملات المحفظة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:431,columnNumber:15},this),d.jsxDEV("button",{onClick:()=>{K(!1),S(null),T([])},className:"text-gray-500 hover:text-gray-700",children:"✕"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:432,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:430,columnNumber:13},this),d.jsxDEV("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[d.jsxDEV("p",{className:"text-sm text-gray-600",children:["المحفظة: ",d.jsxDEV("span",{className:"font-bold",children:k.walletNumber},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:445,columnNumber:61},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:445,columnNumber:15},this),d.jsxDEV("p",{className:"text-sm text-gray-600",children:["المستخدم: ",d.jsxDEV("span",{className:"font-bold",children:null==(l=k.user)?void 0:l.name},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:446,columnNumber:62},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:446,columnNumber:15},this),d.jsxDEV("p",{className:"text-lg font-bold text-primary-600 mt-1",children:["الرصيد الحالي: ",D(k.balance,k.currency)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:447,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:444,columnNumber:13},this),q?d.jsxDEV("div",{className:"flex justify-center py-8",children:d.jsxDEV(u,{className:"animate-spin text-lg md:text-xl text-primary-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:454,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:453,columnNumber:15},this):L.length>0?d.jsxDEV("div",{className:"space-y-2",children:L.map((e,s)=>{return d.jsxDEV("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[d.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[d.jsxDEV("div",{className:"bg-white p-2 rounded-lg",children:Y(e.type)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:464,columnNumber:23},this),d.jsxDEV("div",{className:"flex-1",children:[d.jsxDEV("p",{className:"font-semibold text-sm",children:(a=e.type,{deposit:"شحن",withdraw:"سحب",payment:"دفع",refund:"استرداد",adjustment:"تعديل"}[a]||a)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:468,columnNumber:25},this),e.description&&d.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:e.description},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:472,columnNumber:27},this),d.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:f(e.timestamp)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:476,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:467,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:463,columnNumber:21},this),d.jsxDEV("div",{className:"text-left",children:["deposit"===e.type||"refund"===e.type||"adjustment"===e.type?d.jsxDEV("p",{className:"text-green-600 font-bold text-sm",children:["+",D(e.amount,k.currency)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:483,columnNumber:25},this):d.jsxDEV("p",{className:"text-red-600 font-bold text-sm",children:["-",D(e.amount,k.currency)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:487,columnNumber:25},this),d.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:["الرصيد: ",D(e.balanceAfter||0,k.currency)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:491,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:481,columnNumber:21},this)]},s,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:459,columnNumber:19},this);var a})},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:457,columnNumber:15},this):d.jsxDEV("div",{className:"text-center py-8",children:[d.jsxDEV(h,{className:"text-3xl md:text-4xl text-gray-300 mx-auto mb-2"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:500,columnNumber:17},this),d.jsxDEV("p",{className:"text-gray-500 text-sm",children:"لا توجد معاملات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:501,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:499,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:429,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:428,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Wallets.jsx",lineNumber:140,columnNumber:5},this)}export{v as default};
