var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(s,a,o)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[a]=o,n=(e,s)=>{for(var a in s||(s={}))i.call(s,a)&&l(e,a,s[a]);if(o)for(var a of o(s))r.call(s,a)&&l(e,a,s[a]);return e},m=(e,o)=>s(e,a(o)),c=(e,s,a)=>new Promise((o,i)=>{var r=e=>{try{n(a.next(e))}catch(s){i(s)}},l=e=>{try{n(a.throw(e))}catch(s){i(s)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,l);n((a=a.apply(e,s)).next())});import{k as t,s as d,Q as u,j as p,f as N,M as b,O as x,e as g,a9 as h,l as y,G as C,aq as D,ar as v,ac as j,as as f,K as w,P as U}from"./index-Dfjzp2DE.js";import{r as V}from"./react-vendor-DBmefE3i.js";import{f as E}from"./helpers-B6CJClH3.js";import"./icons-DYE8NDaX.js";import"./utils-CZ_YNEkO.js";function S(){const{error:e,success:s}=t(),[a,o]=V.useState([]),[i,r]=V.useState(!0),[l,S]=V.useState([]),[A,k]=V.useState("all"),[L,O]=V.useState(""),[F,P]=V.useState(!1),[T,_]=V.useState(!1),[I,q]=V.useState(null),[z,$]=V.useState(null),[R,M]=V.useState(null),[G,H]=V.useState({code:"",name:"",description:"",discountType:"percentage",discountValue:"",minOrderAmount:"",maxDiscountAmount:"",applicableStores:[],validFrom:"",validUntil:"",usageLimit:"",usageLimitPerUser:"1",priority:"0",isActive:!0}),[W,K]=V.useState([{value:"amazon",label:"Amazon"},{value:"noon",label:"Noon"},{value:"shein",label:"Shein"},{value:"aliexpress",label:"AliExpress"},{value:"temu",label:"Temu"},{value:"iherb",label:"iHerb"},{value:"niceonesa",label:"Nice One"},{value:"namshi",label:"Namshi"},{value:"trendyol",label:"Trendyol"},{value:"other",label:"متاجر أخرى"}]),[Q,B]=V.useState(!1);V.useEffect(()=>{X(),J()},[]);const J=()=>c(this,null,function*(){try{const e=(yield d.get()).data.settings,s=[{value:"amazon",label:"Amazon"},{value:"noon",label:"Noon"},{value:"shein",label:"Shein"},{value:"aliexpress",label:"AliExpress"},{value:"temu",label:"Temu"},{value:"iherb",label:"iHerb"},{value:"niceonesa",label:"Nice One"},{value:"namshi",label:"Namshi"},{value:"trendyol",label:"Trendyol"},{value:"other",label:"متاجر أخرى"}];if((null==e?void 0:e.localStores)&&Array.isArray(e.localStores)){const a=e.localStores.filter(e=>e.enabled&&e.name&&e.domain).map(e=>{let s=e.domain;if(s.startsWith("http://")||s.startsWith("https://"))try{s=new URL(s).hostname}catch(a){s=s.replace(/^https?:\/\//,"").replace(/\/$/,"")}else s=s.replace(/^https?:\/\//,"").replace(/\/$/,"");return{value:s.toLowerCase(),label:e.name,isLocal:!0,domain:s}});K([...s,...a])}else K(s)}catch(e){}});V.useEffect(()=>{Y()},[a,A,L]);const X=()=>c(this,null,function*(){try{r(!0);const e=yield u.getAll();o(e.data.coupons||[])}catch(s){e("فشل في تحميل الكوبونات")}finally{r(!1)}}),Y=()=>{let e=[...a];if("all"!==A){const s=new Date;"active"===A?e=e.filter(e=>e.isActive&&new Date(e.validUntil)>=s&&(!e.validFrom||new Date(e.validFrom)<=s)):"inactive"===A?e=e.filter(e=>!e.isActive):"expired"===A&&(e=e.filter(e=>new Date(e.validUntil)<s))}L&&(e=e.filter(e=>e.code.toLowerCase().includes(L.toLowerCase())||e.name.toLowerCase().includes(L.toLowerCase())||e.description&&e.description.toLowerCase().includes(L.toLowerCase()))),S(e)},Z=a=>c(this,null,function*(){var o,i;if(window.confirm(`هل أنت متأكد من حذف الكوبون "${a.code}"؟`)){$(a._id);try{yield u.delete(a._id),s("تم حذف الكوبون بنجاح"),X()}catch(r){e((null==(i=null==(o=r.response)?void 0:o.data)?void 0:i.message)||"فشل في حذف الكوبون")}finally{$(null)}}}),ee=a=>c(this,null,function*(){var o,i;M(a._id);try{yield u.toggleStatus(a._id),s(`تم ${a.isActive?"تعطيل":"تفعيل"} الكوبون بنجاح`),X()}catch(r){e((null==(i=null==(o=r.response)?void 0:o.data)?void 0:i.message)||"فشل في تغيير حالة الكوبون")}finally{M(null)}}),se=e=>{const s=new Date;return e.isActive?new Date(e.validUntil)<s?p.jsxDEV("span",{className:"badge bg-red-100 text-red-800",children:"منتهي"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:290,columnNumber:14},this):e.validFrom&&new Date(e.validFrom)>s?p.jsxDEV("span",{className:"badge bg-yellow-100 text-yellow-800",children:"قادم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:293,columnNumber:14},this):p.jsxDEV("span",{className:"badge bg-green-100 text-green-800",children:"نشط"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:295,columnNumber:12},this):p.jsxDEV("span",{className:"badge bg-gray-100 text-gray-800",children:"غير نشط"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:287,columnNumber:14},this)};return i?p.jsxDEV("div",{className:"flex items-center justify-center py-20",children:p.jsxDEV(N,{className:"animate-spin text-xl md:text-2xl text-primary-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:301,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:300,columnNumber:7},this):p.jsxDEV("div",{children:[p.jsxDEV("div",{className:"mb-6 flex items-center justify-between",children:[p.jsxDEV("div",{children:[p.jsxDEV("h1",{className:"text-xl font-bold mb-2 text-gradient",children:"إدارة الكوبونات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:311,columnNumber:11},this),p.jsxDEV("p",{className:"text-gray-600 text-sm",children:"إنشاء وإدارة كوبونات الخصم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:312,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:310,columnNumber:9},this),p.jsxDEV("button",{onClick:()=>{H({code:"",name:"",description:"",discountType:"percentage",discountValue:"",minOrderAmount:"",maxDiscountAmount:"",applicableStores:[],validFrom:"",validUntil:"",usageLimit:"",usageLimitPerUser:"1",priority:"0",isActive:!0}),P(!0)},className:"btn-primary flex items-center gap-2",children:[p.jsxDEV(b,{className:"text-lg"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:318,columnNumber:11},this),"إضافة كوبون جديد"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:314,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:309,columnNumber:7},this),p.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[p.jsxDEV("div",{className:"card bg-gradient-to-br from-primary-50 to-primary-100 border-primary-200",children:p.jsxDEV("div",{className:"flex items-center justify-between",children:[p.jsxDEV("div",{children:[p.jsxDEV("p",{className:"text-xs text-primary-700 font-medium mb-1",children:"إجمالي الكوبونات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:328,columnNumber:15},this),p.jsxDEV("p",{className:"text-xl font-bold text-primary-900",children:a.length},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:329,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:327,columnNumber:13},this),p.jsxDEV("div",{className:"bg-primary-200 p-3 rounded-xl",children:p.jsxDEV(x,{className:"text-lg md:text-xl text-primary-700"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:332,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:331,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:326,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:325,columnNumber:9},this),p.jsxDEV("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:p.jsxDEV("div",{className:"flex items-center justify-between",children:[p.jsxDEV("div",{children:[p.jsxDEV("p",{className:"text-xs text-green-700 font-medium mb-1",children:"الكوبونات النشطة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:340,columnNumber:15},this),p.jsxDEV("p",{className:"text-xl font-bold text-green-900",children:a.filter(e=>{const s=new Date;return e.isActive&&new Date(e.validUntil)>=s&&(!e.validFrom||new Date(e.validFrom)<=s)}).length},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:341,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:339,columnNumber:13},this),p.jsxDEV("div",{className:"bg-green-200 p-3 rounded-xl",children:p.jsxDEV(g,{className:"text-lg md:text-xl text-green-700"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:349,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:348,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:338,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:337,columnNumber:9},this),p.jsxDEV("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:p.jsxDEV("div",{className:"flex items-center justify-between",children:[p.jsxDEV("div",{children:[p.jsxDEV("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"إجمالي الاستخدامات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:357,columnNumber:15},this),p.jsxDEV("p",{className:"text-xl font-bold text-blue-900",children:a.reduce((e,s)=>e+(s.usedCount||0),0)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:358,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:356,columnNumber:13},this),p.jsxDEV("div",{className:"bg-blue-200 p-3 rounded-xl",children:p.jsxDEV(h,{className:"text-lg md:text-xl text-blue-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:363,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:362,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:355,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:354,columnNumber:9},this),p.jsxDEV("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:p.jsxDEV("div",{className:"flex items-center justify-between",children:[p.jsxDEV("div",{children:[p.jsxDEV("p",{className:"text-xs text-purple-400 font-medium mb-1",children:"إجمالي الخصومات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:371,columnNumber:15},this),p.jsxDEV("p",{className:"text-xl font-bold text-purple-900",children:E(a.reduce((e,s)=>{var a;return e+((null==(a=s.stats)?void 0:a.totalDiscountGiven)||0)},0),"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:372,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:370,columnNumber:13},this),p.jsxDEV("div",{className:"bg-purple-200 p-3 rounded-xl",children:p.jsxDEV(y,{className:"text-lg md:text-xl text-purple-400"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:377,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:376,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:369,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:368,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:324,columnNumber:7},this),p.jsxDEV("div",{className:"card mb-6",children:p.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.jsxDEV("div",{className:"flex-1 relative",children:[p.jsxDEV(C,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:387,columnNumber:13},this),p.jsxDEV("input",{type:"text",placeholder:"البحث عن كوبون...",value:L,onChange:e=>O(e.target.value),className:"input pr-10"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:388,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:386,columnNumber:11},this),p.jsxDEV("select",{value:A,onChange:e=>k(e.target.value),className:"input",children:[p.jsxDEV("option",{value:"all",children:"جميع الحالات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:401,columnNumber:13},this),p.jsxDEV("option",{value:"active",children:"نشط"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:402,columnNumber:13},this),p.jsxDEV("option",{value:"inactive",children:"غير نشط"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:403,columnNumber:13},this),p.jsxDEV("option",{value:"expired",children:"منتهي"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:404,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:396,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:385,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:384,columnNumber:7},this),p.jsxDEV("div",{className:"card",children:0===l.length?p.jsxDEV("div",{className:"text-center py-12",children:[p.jsxDEV(x,{className:"mx-auto text-4xl text-gray-400 mb-4"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:413,columnNumber:13},this),p.jsxDEV("p",{className:"text-gray-600",children:"لا توجد كوبونات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:414,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:412,columnNumber:11},this):p.jsxDEV("div",{className:"overflow-x-auto",children:p.jsxDEV("table",{className:"w-full",children:[p.jsxDEV("thead",{children:p.jsxDEV("tr",{className:"border-b",children:[p.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"الكود"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:421,columnNumber:19},this),p.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"الاسم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:422,columnNumber:19},this),p.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"نوع الخصم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:423,columnNumber:19},this),p.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"القيمة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:424,columnNumber:19},this),p.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"الاستخدامات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:425,columnNumber:19},this),p.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"الحالة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:426,columnNumber:19},this),p.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"الإجراءات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:427,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:420,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:419,columnNumber:15},this),p.jsxDEV("tbody",{children:l.map(e=>p.jsxDEV("tr",{className:"border-b hover:bg-gray-50",children:[p.jsxDEV("td",{className:"py-3 px-4",children:[p.jsxDEV("div",{className:"flex items-center gap-2",children:[p.jsxDEV("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono",children:e.code},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:435,columnNumber:25},this),p.jsxDEV("button",{onClick:()=>{return a=e.code,navigator.clipboard.writeText(a),void s("تم نسخ الكود");var a},className:"text-gray-400 hover:text-primary-600",title:"نسخ الكود",children:p.jsxDEV(D,{className:"text-sm"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:443,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:438,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:434,columnNumber:23},this),e.applicableStores&&e.applicableStores.length>0&&p.jsxDEV("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.applicableStores.slice(0,3).map(e=>{var s;const a=(null==(s=W.find(s=>s.value===e))?void 0:s.label)||e;return p.jsxDEV("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:a},e,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:451,columnNumber:31},this)}),e.applicableStores.length>3&&p.jsxDEV("span",{className:"text-xs text-gray-500",children:["+",e.applicableStores.length-3]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:460,columnNumber:29},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:447,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:433,columnNumber:21},this),p.jsxDEV("td",{className:"py-3 px-4",children:p.jsxDEV("div",{children:[p.jsxDEV("p",{className:"font-medium",children:e.name},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:469,columnNumber:25},this),e.description&&p.jsxDEV("p",{className:"text-sm text-gray-500",children:e.description},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:471,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:468,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:467,columnNumber:21},this),p.jsxDEV("td",{className:"py-3 px-4",children:p.jsxDEV("span",{className:"badge bg-blue-100 text-blue-700",children:"percentage"===e.discountType?p.jsxDEV(p.Fragment,{children:[p.jsxDEV(v,{className:"inline text-xs"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:478,columnNumber:29},this)," نسبة"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:478,columnNumber:27},this):p.jsxDEV(p.Fragment,{children:[p.jsxDEV(y,{className:"inline text-xs"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:480,columnNumber:29},this)," مبلغ ثابت"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:480,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:476,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:475,columnNumber:21},this),p.jsxDEV("td",{className:"py-3 px-4",children:p.jsxDEV("span",{className:"font-semibold text-green-600",children:"percentage"===e.discountType?`${e.discountValue}%`:E(e.discountValue,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:485,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:484,columnNumber:21},this),p.jsxDEV("td",{className:"py-3 px-4",children:p.jsxDEV("div",{className:"text-sm",children:[p.jsxDEV("p",{children:[e.usedCount||0," / ",e.usageLimit||"∞"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:494,columnNumber:25},this),e.usageLimitPerUser&&p.jsxDEV("p",{className:"text-gray-500 text-xs",children:[e.usageLimitPerUser," لكل مستخدم"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:496,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:493,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:492,columnNumber:21},this),p.jsxDEV("td",{className:"py-3 px-4",children:se(e)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:502,columnNumber:21},this),p.jsxDEV("td",{className:"py-3 px-4",children:p.jsxDEV("div",{className:"flex items-center gap-2",children:[p.jsxDEV("button",{onClick:()=>(e=>{q(e),H({code:e.code,name:e.name,description:e.description||"",discountType:e.discountType,discountValue:e.discountValue,minOrderAmount:e.minOrderAmount||"",maxDiscountAmount:e.maxDiscountAmount||"",applicableStores:Array.isArray(e.applicableStores)?e.applicableStores:[],validFrom:e.validFrom?new Date(e.validFrom).toISOString().split("T")[0]:"",validUntil:e.validUntil?new Date(e.validUntil).toISOString().split("T")[0]:"",usageLimit:e.usageLimit||"",usageLimitPerUser:e.usageLimitPerUser||"1",priority:e.priority||"0",isActive:e.isActive}),_(!0)})(e),className:"text-blue-600 hover:text-blue-700",title:"تعديل",children:p.jsxDEV(j,{className:"text-lg"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:512,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:507,columnNumber:25},this),p.jsxDEV("button",{onClick:()=>ee(e),disabled:R===e._id,className:""+(e.isActive?"text-yellow-600 hover:text-yellow-800":"text-green-600 hover:text-green-800"),title:e.isActive?"تعطيل":"تفعيل",children:R===e._id?p.jsxDEV(N,{className:"text-lg animate-spin"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:521,columnNumber:29},this):p.jsxDEV(f,{className:"text-lg"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:523,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:514,columnNumber:25},this),p.jsxDEV("button",{onClick:()=>Z(e),disabled:z===e._id,className:"text-red-600 hover:text-red-800",title:"حذف",children:z===e._id?p.jsxDEV(N,{className:"text-lg animate-spin"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:533,columnNumber:29},this):p.jsxDEV(w,{className:"text-lg"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:535,columnNumber:29},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:526,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:506,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:505,columnNumber:21},this)]},e._id,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:432,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:430,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:418,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:417,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:410,columnNumber:7},this),(F||T)&&p.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxDEV("div",{className:"bg-white rounded-lg shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[p.jsxDEV("div",{className:"sticky top-0 bg-gradient-to-r from-primary-600 to-secondary-500 text-white border-b p-4 flex items-center justify-between rounded-t-lg",children:[p.jsxDEV("h2",{className:"text-lg font-bold",children:F?"إضافة كوبون جديد":"تعديل الكوبون"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:553,columnNumber:15},this),p.jsxDEV("button",{onClick:()=>{P(!1),_(!1),q(null)},className:"text-white hover:text-gray-200 transition-colors",children:p.jsxDEV(U,{className:"text-xl"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:564,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:556,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:552,columnNumber:13},this),p.jsxDEV("form",{onSubmit:a=>c(this,null,function*(){var o,i;a.preventDefault(),B(!0);try{const e=m(n({},G),{discountValue:parseFloat(G.discountValue),minOrderAmount:G.minOrderAmount?parseFloat(G.minOrderAmount):0,maxDiscountAmount:G.maxDiscountAmount?parseFloat(G.maxDiscountAmount):null,usageLimit:G.usageLimit?parseInt(G.usageLimit):null,usageLimitPerUser:parseInt(G.usageLimitPerUser)||1,priority:parseInt(G.priority)||0,validFrom:G.validFrom?new Date(G.validFrom).toISOString():(new Date).toISOString(),validUntil:new Date(G.validUntil).toISOString()});F?(yield u.create(e),s("تم إنشاء الكوبون بنجاح")):(yield u.update(I._id,e),s("تم تحديث الكوبون بنجاح")),P(!1),_(!1),q(null),X()}catch(r){e((null==(i=null==(o=r.response)?void 0:o.data)?void 0:i.message)||"فشل في حفظ الكوبون")}finally{B(!1)}}),className:"p-6 bg-gray-50",children:[p.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["كود الكوبون ",p.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:572,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:571,columnNumber:19},this),p.jsxDEV("input",{type:"text",required:!0,value:G.code,onChange:e=>H(m(n({},G),{code:e.target.value.toUpperCase()})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:"مثال: SUMMER2024"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:574,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:570,columnNumber:17},this),p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["اسم الكوبون ",p.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:586,columnNumber:33},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:585,columnNumber:19},this),p.jsxDEV("input",{type:"text",required:!0,value:G.name,onChange:e=>H(m(n({},G),{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:"مثال: خصم الصيف"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:588,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:584,columnNumber:17},this),p.jsxDEV("div",{className:"md:col-span-2 bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الوصف"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:599,columnNumber:19},this),p.jsxDEV("textarea",{value:G.description,onChange:e=>H(m(n({},G),{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none resize-none",rows:"3",placeholder:"وصف الكوبون..."},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:600,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:598,columnNumber:17},this),p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["نوع الخصم ",p.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:611,columnNumber:31},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:610,columnNumber:19},this),p.jsxDEV("select",{required:!0,value:G.discountType,onChange:e=>H(m(n({},G),{discountType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",children:[p.jsxDEV("option",{value:"percentage",children:"نسبة مئوية (%)"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:619,columnNumber:21},this),p.jsxDEV("option",{value:"fixed",children:"مبلغ ثابت"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:620,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:613,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:609,columnNumber:17},this),p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["قيمة الخصم ",p.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:626,columnNumber:32},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:625,columnNumber:19},this),p.jsxDEV("input",{type:"number",required:!0,min:"0",step:"0.01",value:G.discountValue,onChange:e=>H(m(n({},G),{discountValue:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:"percentage"===G.discountType?"مثال: 20":"مثال: 50"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:628,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:624,columnNumber:17},this),p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الحد الأدنى للطلب"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:641,columnNumber:19},this),p.jsxDEV("input",{type:"number",min:"0",step:"0.01",value:G.minOrderAmount,onChange:e=>H(m(n({},G),{minOrderAmount:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:"0"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:642,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:640,columnNumber:17},this),"percentage"===G.discountType&&p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الحد الأقصى للخصم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:655,columnNumber:21},this),p.jsxDEV("input",{type:"number",min:"0",step:"0.01",value:G.maxDiscountAmount,onChange:e=>H(m(n({},G),{maxDiscountAmount:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:"لا يوجد حد"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:656,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:654,columnNumber:19},this),p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"تاريخ البداية"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:669,columnNumber:19},this),p.jsxDEV("input",{type:"date",value:G.validFrom,onChange:e=>H(m(n({},G),{validFrom:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:670,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:668,columnNumber:17},this),p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["تاريخ الانتهاء ",p.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:680,columnNumber:36},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:679,columnNumber:19},this),p.jsxDEV("input",{type:"date",required:!0,value:G.validUntil,onChange:e=>H(m(n({},G),{validUntil:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:682,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:678,columnNumber:17},this),p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"حد الاستخدام"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:692,columnNumber:19},this),p.jsxDEV("input",{type:"number",min:"1",value:G.usageLimit,onChange:e=>H(m(n({},G),{usageLimit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:"لا يوجد حد"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:693,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:691,columnNumber:17},this),p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"حد الاستخدام لكل مستخدم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:704,columnNumber:19},this),p.jsxDEV("input",{type:"number",min:"1",value:G.usageLimitPerUser,onChange:e=>H(m(n({},G),{usageLimitPerUser:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:705,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:703,columnNumber:17},this),p.jsxDEV("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"الأولوية"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:715,columnNumber:19},this),p.jsxDEV("input",{type:"number",value:G.priority,onChange:e=>H(m(n({},G),{priority:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",placeholder:"0"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:716,columnNumber:19},this),p.jsxDEV("p",{className:"text-xs text-gray-500 mt-2",children:"كلما زادت القيمة، زادت الأولوية"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:723,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:714,columnNumber:17},this),p.jsxDEV("div",{className:"md:col-span-2 bg-white p-4 rounded-lg border border-gray-200",children:[p.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"المتاجر المطبقة عليها الكوبون"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:727,columnNumber:19},this),p.jsxDEV("p",{className:"text-xs text-gray-500 mb-3",children:"اختر المتاجر التي يطبق عليها هذا الكوبون. إذا لم تختر أي متجر، سيُطبق على جميع المتاجر."},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:730,columnNumber:19},this),p.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:W.map(e=>p.jsxDEV("label",{className:"flex items-center gap-2 p-2 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[p.jsxDEV("input",{type:"checkbox",checked:G.applicableStores.includes(e.value),onChange:s=>{s.target.checked?H(m(n({},G),{applicableStores:[...G.applicableStores,e.value]})):H(m(n({},G),{applicableStores:G.applicableStores.filter(s=>s!==e.value)}))},className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:739,columnNumber:25},this),p.jsxDEV("span",{className:"text-sm text-gray-700",children:e.label},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:759,columnNumber:25},this)]},e.value,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:735,columnNumber:23},this))},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:733,columnNumber:19},this),G.applicableStores.length>0&&p.jsxDEV("p",{className:"text-xs text-green-600 mt-2",children:["✓ سيُطبق الكوبون على ",G.applicableStores.length," متجر محدد"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:764,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:726,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:569,columnNumber:15},this),p.jsxDEV("div",{className:"flex items-center gap-4 pt-4 mt-4 border-t border-gray-200",children:p.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer bg-white p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[p.jsxDEV("input",{type:"checkbox",checked:G.isActive,onChange:e=>H(m(n({},G),{isActive:e.target.checked})),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:773,columnNumber:19},this),p.jsxDEV("span",{className:"text-sm font-medium text-gray-700",children:"نشط"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:779,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:772,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:771,columnNumber:15},this),p.jsxDEV("div",{className:"flex gap-4 pt-6 mt-4 border-t border-gray-200",children:[p.jsxDEV("button",{type:"submit",disabled:Q,className:"btn-primary flex-1",children:Q?p.jsxDEV(p.Fragment,{children:[p.jsxDEV(N,{className:"animate-spin mr-2"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:791,columnNumber:23},this),"جاري الحفظ..."]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:790,columnNumber:21},this):"حفظ"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:784,columnNumber:17},this),p.jsxDEV("button",{type:"button",onClick:()=>{P(!1),_(!1),q(null)},className:"btn-secondary",children:"إلغاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:798,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:783,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:568,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:551,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:550,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Coupons.jsx",lineNumber:307,columnNumber:5},this)}export{S as default};
