import{k as e,ab as s,j as a,f as r,a9 as t,d as l,l as n,T as m,b as i,A as o}from"./index-Dfjzp2DE.js";import{r as c}from"./react-vendor-DBmefE3i.js";import{f as d,b as u}from"./helpers-B6CJClH3.js";import"./icons-DYE8NDaX.js";import"./utils-CZ_YNEkO.js";function g(){var g,b,N;const{error:x}=e(),[h,D]=c.useState(null),[p,j]=c.useState(null),[v,y]=c.useState(!0),[f,w]=c.useState([]),[A,C]=c.useState("overview");c.useEffect(()=>{E()},[]);const E=()=>{return e=this,a=null,r=function*(){var e,a,r,t,l;try{const t=yield s.getMyAgent();if(null==(e=null==t?void 0:t.data)?void 0:e.agent){const e=t.data.agent;D(e);const l=e._id,[n,m]=yield Promise.all([s.getStats(l).catch(()=>({data:{stats:{}}})),s.getOrders(l,{limit:5}).catch(()=>({data:{orders:[]}}))]);(null==(a=null==n?void 0:n.data)?void 0:a.stats)&&j(n.data.stats),(null==(r=null==m?void 0:m.data)?void 0:r.orders)&&w(m.data.orders)}}catch(n){x((null==(l=null==(t=n.response)?void 0:t.data)?void 0:l.message)||"فشل في تحميل البيانات")}finally{y(!1)}},new Promise((s,t)=>{var l=e=>{try{m(r.next(e))}catch(s){t(s)}},n=e=>{try{m(r.throw(e))}catch(s){t(s)}},m=e=>e.done?s(e.value):Promise.resolve(e.value).then(l,n);m((r=r.apply(e,a)).next())});var e,a,r};if(v)return a.jsxDEV("div",{className:"flex items-center justify-center py-20",children:a.jsxDEV(r,{className:"animate-spin text-xl md:text-2xl text-primary-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:64,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:63,columnNumber:7},this);if(!h)return a.jsxDEV("div",{className:"card text-center py-12",children:[a.jsxDEV(t,{className:"text-4xl text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:72,columnNumber:9},this),a.jsxDEV("p",{className:"text-lg text-gray-600 mb-4",children:"أنت لست وكيلاً"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:73,columnNumber:9},this),a.jsxDEV("p",{className:"text-sm text-gray-500",children:"يرجى التواصل مع الإدارة لتفعيل حسابك كـ وكيل"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:74,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:71,columnNumber:7},this);const U=[{id:"overview",label:"نظرة عامة",icon:o},{id:"customers",label:"العملاء",icon:t},{id:"orders",label:"الطلبات",icon:l},{id:"commissions",label:"العمولات",icon:n}];return a.jsxDEV("div",{children:[a.jsxDEV("div",{className:"mb-6",children:[a.jsxDEV("h1",{className:"text-xl font-bold mb-2 text-gradient",children:"لوحة الوكيل"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:90,columnNumber:9},this),a.jsxDEV("p",{className:"text-gray-600",children:["مرحباً ",null==(g=h.user)?void 0:g.name," - رقم الوكيل: ",h.agentNumber]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:91,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:89,columnNumber:7},this),a.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-8",children:[a.jsxDEV("div",{className:"card bg-gradient-to-br from-primary-50 to-primary-100 border-primary-200",children:a.jsxDEV("div",{className:"flex items-center justify-between",children:[a.jsxDEV("div",{children:[a.jsxDEV("p",{className:"text-xs text-primary-700 font-medium mb-1",children:"إجمالي العملاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:101,columnNumber:15},this),a.jsxDEV("p",{className:"text-xl font-bold text-primary-900",children:(null==p?void 0:p.totalCustomers)||0},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:102,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:100,columnNumber:13},this),a.jsxDEV("div",{className:"bg-primary-200 p-3 rounded-xl",children:a.jsxDEV(t,{className:"text-lg md:text-xl text-primary-700"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:105,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:104,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:99,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:98,columnNumber:9},this),a.jsxDEV("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:a.jsxDEV("div",{className:"flex items-center justify-between",children:[a.jsxDEV("div",{children:[a.jsxDEV("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"إجمالي الطلبات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:113,columnNumber:15},this),a.jsxDEV("p",{className:"text-xl font-bold text-blue-900",children:(null==p?void 0:p.totalOrders)||0},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:114,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:112,columnNumber:13},this),a.jsxDEV("div",{className:"bg-blue-200 p-3 rounded-xl",children:a.jsxDEV(l,{className:"text-lg md:text-xl text-blue-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:117,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:116,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:111,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:110,columnNumber:9},this),a.jsxDEV("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:a.jsxDEV("div",{className:"flex items-center justify-between",children:[a.jsxDEV("div",{children:[a.jsxDEV("p",{className:"text-xs text-green-700 font-medium mb-1",children:"إجمالي المبيعات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:125,columnNumber:15},this),a.jsxDEV("p",{className:"text-xl font-bold text-green-900",children:d((null==p?void 0:p.totalSales)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:126,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:124,columnNumber:13},this),a.jsxDEV("div",{className:"bg-green-200 p-3 rounded-xl",children:a.jsxDEV(n,{className:"text-lg md:text-xl text-green-700"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:131,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:123,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:122,columnNumber:9},this),a.jsxDEV("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:a.jsxDEV("div",{className:"flex items-center justify-between",children:[a.jsxDEV("div",{children:[a.jsxDEV("p",{className:"text-xs text-purple-400 font-medium mb-1",children:"العمولات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:139,columnNumber:15},this),a.jsxDEV("p",{className:"text-xl font-bold text-purple-900",children:d((null==(b=null==p?void 0:p.commissions)?void 0:b.total)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:140,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:138,columnNumber:13},this),a.jsxDEV("div",{className:"bg-purple-200 p-3 rounded-xl",children:a.jsxDEV(m,{className:"text-lg md:text-xl text-purple-400"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:145,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:144,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:137,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:136,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:97,columnNumber:7},this),(null==(N=null==p?void 0:p.payments)?void 0:N.totalPending)>0&&a.jsxDEV("div",{className:"card bg-yellow-50 border-yellow-200 mb-6",children:a.jsxDEV("div",{className:"flex items-center justify-between",children:[a.jsxDEV("div",{children:[a.jsxDEV("p",{className:"font-semibold text-yellow-800 mb-1",children:"مبلغ مستحق للدفع"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:156,columnNumber:15},this),a.jsxDEV("p",{className:"text-lg font-bold text-yellow-900",children:d(p.payments.totalPending,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:157,columnNumber:15},this),a.jsxDEV("p",{className:"text-xs text-yellow-700 mt-1",children:"يرجى دفع المبلغ المستحق للمنصة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:160,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:155,columnNumber:13},this),a.jsxDEV(i,{className:"text-2xl text-yellow-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:164,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:154,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:153,columnNumber:9},this),a.jsxDEV("div",{className:"card mb-6",children:a.jsxDEV("div",{className:"flex flex-wrap gap-2 border-b border-gray-200 pb-4",children:U.map(e=>{const s=e.icon;return a.jsxDEV("button",{onClick:()=>C(e.id),className:"px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 "+(A===e.id?"bg-primary-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[a.jsxDEV(s,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:184,columnNumber:17},this),a.jsxDEV("span",{children:e.label},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:185,columnNumber:17},this)]},e.id,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:175,columnNumber:15},this)})},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:171,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:170,columnNumber:7},this),a.jsxDEV("div",{className:"card",children:["overview"===A&&a.jsxDEV("div",{className:"space-y-6",children:a.jsxDEV("div",{children:[a.jsxDEV("h2",{className:"text-lg font-bold mb-4",children:"آخر الطلبات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:197,columnNumber:15},this),0===f.length?a.jsxDEV("div",{className:"text-center py-8 text-gray-500",children:"لا توجد طلبات بعد"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:199,columnNumber:17},this):a.jsxDEV("div",{className:"space-y-3",children:f.map(e=>{var s,r;return a.jsxDEV("div",{className:"border border-gray-200 rounded-lg p-4",children:a.jsxDEV("div",{className:"flex items-start justify-between",children:[a.jsxDEV("div",{className:"flex-1",children:[a.jsxDEV("p",{className:"font-semibold",children:["طلب #",e.orderNumber]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:208,columnNumber:27},this),a.jsxDEV("p",{className:"text-sm text-gray-600",children:(null==(s=e.customer)?void 0:s.name)||"عميل"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:209,columnNumber:27},this),a.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:d((null==(r=e.pricing)?void 0:r.totalCost)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:212,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:207,columnNumber:25},this),a.jsxDEV("div",{className:"text-right",children:[a.jsxDEV("span",{className:"px-2 py-1 rounded text-xs "+("delivered"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:217,columnNumber:27},this),a.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:u(e.createdAt)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:224,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:216,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:206,columnNumber:23},this)},e._id,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:205,columnNumber:21},this)})},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:203,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:196,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:195,columnNumber:11},this),"customers"===A&&a.jsxDEV("div",{className:"text-center py-8",children:a.jsxDEV("p",{className:"text-gray-600",children:"سيتم إضافة إدارة العملاء هنا"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:239,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:238,columnNumber:11},this),"orders"===A&&a.jsxDEV("div",{className:"text-center py-8",children:a.jsxDEV("p",{className:"text-gray-600",children:"سيتم إضافة إدارة الطلبات هنا"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:245,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:244,columnNumber:11},this),"commissions"===A&&a.jsxDEV("div",{className:"text-center py-8",children:a.jsxDEV("p",{className:"text-gray-600",children:"سيتم إضافة العمولات هنا"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:251,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:250,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:193,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/agent/AgentDashboard.jsx",lineNumber:87,columnNumber:5},this)}export{g as default};
