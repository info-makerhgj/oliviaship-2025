var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(s,a,i)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[a]=i,t=(e,s)=>{for(var a in s||(s={}))m.call(s,a)&&l(e,a,s[a]);if(i)for(var a of i(s))n.call(s,a)&&l(e,a,s[a]);return e},r=(e,i)=>s(e,a(i)),c=(e,s,a)=>new Promise((i,m)=>{var n=e=>{try{t(a.next(e))}catch(s){m(s)}},l=e=>{try{t(a.throw(e))}catch(s){m(s)}},t=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,l);t((a=a.apply(e,s)).next())});import{k as o,ab as d,j as u,M as N,G as x,f as g,a9 as b,A as p,as as h,K as j,Z as D,ae as y}from"./index-Dfjzp2DE.js";import{r as v}from"./react-vendor-DBmefE3i.js";import{f}from"./helpers-B6CJClH3.js";import"./icons-DYE8NDaX.js";import"./utils-CZ_YNEkO.js";function w(){var e,s,a,i,m,n,l;const{success:w,error:C}=o(),[A,E]=v.useState([]),[U,V]=v.useState(!0),[S,k]=v.useState(""),[R,O]=v.useState("all"),[_,P]=v.useState({page:1,limit:20,total:0,pages:0}),[I,q]=v.useState(!1),[z,F]=v.useState(!1),[$,G]=v.useState(null),[K,M]=v.useState(null),[Z,B]=v.useState(!1),[H,J]=v.useState({userId:"",commissionRate:10,notes:""}),[L,Q]=v.useState([]),[T,W]=v.useState(!1),[X,Y]=v.useState(!1);v.useEffect(()=>{ee(_.page)},[_.page,S,R]);const ee=(e=1)=>c(this,null,function*(){try{V(!0);const s=t(t({page:e,limit:20},S&&{search:S}),"all"!==R&&{status:R}),a=yield d.getAll(s);E(a.data.agents||[]),P(a.data.pagination||{page:1,limit:20,total:0,pages:0})}catch(s){C("فشل في تحميل الوكلاء")}finally{V(!1)}}),se=()=>c(this,null,function*(){try{W(!0);const e=(yield y.getAll()).data.users||[],s=A.map(e=>{var s,a;return null==(a=null==(s=e.user)?void 0:s._id)?void 0:a.toString()}),a=e.filter(e=>{var a;return"agent"!==e.role&&!s.includes(null==(a=e._id)?void 0:a.toString())});Q(a)}catch(e){}finally{W(!1)}}),ae=e=>c(this,null,function*(){var s,a;try{yield d.toggleStatus(e),w("✅ تم تحديث الحالة بنجاح"),ee(_.page)}catch(i){C((null==(a=null==(s=i.response)?void 0:s.data)?void 0:a.message)||"فشل في تحديث الحالة")}}),ie=e=>c(this,null,function*(){var s,a;if(window.confirm("هل أنت متأكد من حذف هذا الوكيل؟ سيتم حذف الوكيل تماماً من النظام."))try{yield d.delete(e),w("✅ تم حذف الوكيل بنجاح"),ee(_.page)}catch(i){C((null==(a=null==(s=i.response)?void 0:s.data)?void 0:a.message)||"فشل في حذف الوكيل")}}),me=e=>c(this,null,function*(){B(!0);try{const s=yield d.getStats(e);M(s.data.stats)}catch(s){C("فشل في تحميل الإحصائيات")}finally{B(!1)}}),ne=e=>{G(e),F(!0),me(e._id)},le=e=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),te=e=>({active:"نشط",inactive:"غير نشط",suspended:"موقوف"}[e]||e);return u.jsxDEV("div",{children:[u.jsxDEV("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[u.jsxDEV("div",{children:[u.jsxDEV("h1",{className:"text-xl font-bold mb-2 text-gradient",children:"إدارة الوكلاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:176,columnNumber:11},this),u.jsxDEV("p",{className:"text-gray-600",children:"إدارة الوكلاء ومراقبة أدائهم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:177,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:175,columnNumber:9},this),u.jsxDEV("button",{onClick:()=>{se(),q(!0)},className:"btn-primary flex items-center gap-2",children:[u.jsxDEV(N,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:186,columnNumber:11},this),"إضافة وكيل جديد"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:179,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:174,columnNumber:7},this),u.jsxDEV("div",{className:"card mb-6",children:u.jsxDEV("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxDEV("div",{className:"flex-1",children:u.jsxDEV("div",{className:"relative",children:[u.jsxDEV(x,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:196,columnNumber:15},this),u.jsxDEV("input",{type:"text",placeholder:"بحث عن وكيل...",value:S,onChange:e=>{k(e.target.value),P(r(t({},_),{page:1}))},className:"input-field w-full pr-10"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:197,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:195,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:194,columnNumber:11},this),u.jsxDEV("select",{value:R,onChange:e=>{O(e.target.value),P(r(t({},_),{page:1}))},className:"input-field",children:[u.jsxDEV("option",{value:"all",children:"جميع الحالات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:217,columnNumber:13},this),u.jsxDEV("option",{value:"active",children:"نشط"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:218,columnNumber:13},this),u.jsxDEV("option",{value:"inactive",children:"غير نشط"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:219,columnNumber:13},this),u.jsxDEV("option",{value:"suspended",children:"موقوف"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:220,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:209,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:193,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:192,columnNumber:7},this),U?u.jsxDEV("div",{className:"flex items-center justify-center py-20",children:u.jsxDEV(g,{className:"animate-spin text-xl md:text-2xl text-primary-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:228,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:227,columnNumber:9},this):0===A.length?u.jsxDEV("div",{className:"card text-center py-12",children:[u.jsxDEV(b,{className:"text-4xl text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:232,columnNumber:11},this),u.jsxDEV("p",{className:"text-lg text-gray-600",children:"لا توجد وكلاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:233,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:231,columnNumber:9},this):u.jsxDEV(u.Fragment,{children:[u.jsxDEV("div",{className:"card hidden lg:block overflow-x-auto",children:u.jsxDEV("table",{className:"w-full",children:[u.jsxDEV("thead",{children:u.jsxDEV("tr",{className:"border-b border-gray-200",children:[u.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"رقم الوكيل"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:242,columnNumber:19},this),u.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"الاسم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:243,columnNumber:19},this),u.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"نسبة العمولة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:244,columnNumber:19},this),u.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"العملاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:245,columnNumber:19},this),u.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"الطلبات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:246,columnNumber:19},this),u.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"المبيعات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:247,columnNumber:19},this),u.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"المستحق"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:248,columnNumber:19},this),u.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"الحالة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:249,columnNumber:19},this),u.jsxDEV("th",{className:"text-right py-3 px-4 font-semibold",children:"الإجراءات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:250,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:241,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:240,columnNumber:15},this),u.jsxDEV("tbody",{children:A.map(e=>{var s,a,i,m,n;return u.jsxDEV("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[u.jsxDEV("td",{className:"py-3 px-4",children:u.jsxDEV("span",{className:"font-mono text-primary-600",children:e.agentNumber},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:257,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:256,columnNumber:21},this),u.jsxDEV("td",{className:"py-3 px-4",children:u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"font-semibold",children:null==(s=e.user)?void 0:s.name},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:261,columnNumber:25},this),u.jsxDEV("p",{className:"text-xs text-gray-500",children:null==(a=e.user)?void 0:a.email},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:262,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:260,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:259,columnNumber:21},this),u.jsxDEV("td",{className:"py-3 px-4",children:u.jsxDEV("span",{className:"font-semibold",children:[e.commissionRate,"%"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:266,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:265,columnNumber:21},this),u.jsxDEV("td",{className:"py-3 px-4",children:(null==(i=e.stats)?void 0:i.totalCustomers)||0},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:268,columnNumber:21},this),u.jsxDEV("td",{className:"py-3 px-4",children:(null==(m=e.stats)?void 0:m.totalOrders)||0},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:269,columnNumber:21},this),u.jsxDEV("td",{className:"py-3 px-4",children:f((null==(n=e.stats)?void 0:n.totalSales)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:270,columnNumber:21},this),u.jsxDEV("td",{className:"py-3 px-4",children:u.jsxDEV("span",{className:"text-yellow-600 font-semibold",children:f(e.pendingAmount||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:274,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:273,columnNumber:21},this),u.jsxDEV("td",{className:"py-3 px-4",children:u.jsxDEV("span",{className:`px-2 py-1 rounded text-xs ${le(e.status)}`,children:te(e.status)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:279,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:278,columnNumber:21},this),u.jsxDEV("td",{className:"py-3 px-4",children:u.jsxDEV("div",{className:"flex items-center gap-2",children:[u.jsxDEV("button",{onClick:()=>ne(e),className:"p-2 text-primary-600 hover:bg-primary-50 rounded",title:"عرض الإحصائيات",children:u.jsxDEV(p,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:290,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:285,columnNumber:25},this),u.jsxDEV("button",{onClick:()=>ae(e._id),className:"p-2 rounded "+("active"===e.status?"text-gray-600 hover:bg-gray-100":"text-green-600 hover:bg-green-50"),title:"active"===e.status?"تعطيل":"تفعيل",children:u.jsxDEV(h,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:301,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:292,columnNumber:25},this),u.jsxDEV("button",{onClick:()=>ie(e._id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"حذف الوكيل",children:u.jsxDEV(j,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:308,columnNumber:27},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:303,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:284,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:283,columnNumber:21},this)]},e._id,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:255,columnNumber:19},this)})},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:253,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:239,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:238,columnNumber:11},this),u.jsxDEV("div",{className:"lg:hidden space-y-3",children:A.map(e=>{var s,a,i,m,n;return u.jsxDEV("div",{className:"card p-4",children:[u.jsxDEV("div",{className:"flex items-start justify-between mb-3",children:[u.jsxDEV("div",{className:"flex-1",children:[u.jsxDEV("p",{className:"font-mono font-bold text-primary-600 mb-1 text-sm",children:e.agentNumber},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:324,columnNumber:21},this),u.jsxDEV("p",{className:"font-semibold",children:null==(s=e.user)?void 0:s.name},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:327,columnNumber:21},this),u.jsxDEV("p",{className:"text-xs text-gray-500",children:null==(a=e.user)?void 0:a.email},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:328,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:323,columnNumber:19},this),u.jsxDEV("span",{className:`px-2 py-1 rounded text-xs ${le(e.status)}`,children:te(e.status)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:330,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:322,columnNumber:17},this),u.jsxDEV("div",{className:"grid grid-cols-2 gap-3 mb-3 pt-3 border-t border-gray-200",children:[u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"text-xs text-gray-500",children:"نسبة العمولة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:337,columnNumber:21},this),u.jsxDEV("p",{className:"font-semibold",children:[e.commissionRate,"%"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:338,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:336,columnNumber:19},this),u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"text-xs text-gray-500",children:"العملاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:341,columnNumber:21},this),u.jsxDEV("p",{className:"font-semibold",children:(null==(i=e.stats)?void 0:i.totalCustomers)||0},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:342,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:340,columnNumber:19},this),u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"text-xs text-gray-500",children:"الطلبات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:345,columnNumber:21},this),u.jsxDEV("p",{className:"font-semibold",children:(null==(m=e.stats)?void 0:m.totalOrders)||0},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:346,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:344,columnNumber:19},this),u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"text-xs text-gray-500",children:"المبيعات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:349,columnNumber:21},this),u.jsxDEV("p",{className:"font-semibold",children:f((null==(n=e.stats)?void 0:n.totalSales)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:350,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:348,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:335,columnNumber:17},this),u.jsxDEV("div",{className:"pt-3 border-t border-gray-200",children:[u.jsxDEV("p",{className:"text-xs text-gray-500 mb-1",children:"المستحق للدفع"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:357,columnNumber:19},this),u.jsxDEV("p",{className:"text-lg font-bold text-yellow-600",children:f(e.pendingAmount||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:358,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:356,columnNumber:17},this),u.jsxDEV("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-200",children:[u.jsxDEV("button",{onClick:()=>ne(e),className:"flex-1 btn-secondary py-2 text-xs flex items-center justify-center gap-1",children:[u.jsxDEV(p,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:368,columnNumber:21},this),"الإحصائيات"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:364,columnNumber:19},this),u.jsxDEV("button",{onClick:()=>ae(e._id),className:"flex-1 py-2 text-xs flex items-center justify-center gap-1 rounded "+("active"===e.status?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:[u.jsxDEV(h,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:379,columnNumber:21},this),"active"===e.status?"تعطيل":"تفعيل"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:371,columnNumber:19},this),u.jsxDEV("button",{onClick:()=>ie(e._id),className:"flex-1 bg-red-100 text-red-700 hover:bg-red-200 py-2 text-xs rounded flex items-center justify-center gap-1",children:[u.jsxDEV(j,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:386,columnNumber:21},this),"حذف"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:382,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:363,columnNumber:17},this)]},e._id,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:321,columnNumber:15},this)})},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:319,columnNumber:11},this),_.pages>1&&u.jsxDEV("div",{className:"flex items-center justify-center gap-2 mt-6",children:[u.jsxDEV("button",{onClick:()=>P(r(t({},_),{page:_.page-1})),disabled:1===_.page,className:"btn-secondary disabled:opacity-50",children:"السابق"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:397,columnNumber:15},this),u.jsxDEV("span",{className:"text-sm text-gray-600",children:["صفحة ",_.page," من ",_.pages]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:404,columnNumber:15},this),u.jsxDEV("button",{onClick:()=>P(r(t({},_),{page:_.page+1})),disabled:_.page>=_.pages,className:"btn-secondary disabled:opacity-50",children:"التالي"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:407,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:396,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:236,columnNumber:9},this),I&&u.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxDEV("div",{className:"bg-white rounded-lg max-w-md w-full p-4 md:p-6",children:[u.jsxDEV("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"إضافة وكيل جديد"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:423,columnNumber:13},this),u.jsxDEV("form",{onSubmit:e=>c(this,null,function*(){var s,a;if(e.preventDefault(),H.userId){Y(!0);try{yield d.create(H),w("✅ تم إنشاء الوكيل بنجاح"),q(!1),J({userId:"",commissionRate:10,notes:""}),ee(_.page)}catch(i){C((null==(a=null==(s=i.response)?void 0:s.data)?void 0:a.message)||"فشل في إنشاء الوكيل")}finally{Y(!1)}}else C("يجب اختيار مستخدم")}),className:"space-y-4",children:[u.jsxDEV("div",{children:[u.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المستخدم *"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:426,columnNumber:17},this),u.jsxDEV("select",{value:H.userId,onChange:e=>J(r(t({},H),{userId:e.target.value})),required:!0,className:"input-field w-full",disabled:T,children:[u.jsxDEV("option",{value:"",children:"اختر مستخدماً"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:436,columnNumber:19},this),L.map(e=>u.jsxDEV("option",{value:e._id,children:[e.name," - ",e.email]},e._id,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:438,columnNumber:21},this))]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:429,columnNumber:17},this),T&&u.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"جاري تحميل المستخدمين..."},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:444,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:425,columnNumber:15},this),u.jsxDEV("div",{children:[u.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة العمولة (%) *"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:449,columnNumber:17},this),u.jsxDEV("input",{type:"number",value:H.commissionRate,onChange:e=>J(r(t({},H),{commissionRate:parseFloat(e.target.value)||0})),min:"0",max:"100",step:"0.1",required:!0,className:"input-field w-full"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:452,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:448,columnNumber:15},this),u.jsxDEV("div",{children:[u.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:467,columnNumber:17},this),u.jsxDEV("textarea",{value:H.notes,onChange:e=>J(r(t({},H),{notes:e.target.value})),rows:3,className:"input-field w-full",placeholder:"ملاحظات عن الوكيل..."},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:470,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:466,columnNumber:15},this),u.jsxDEV("div",{className:"flex gap-3 mt-6",children:[u.jsxDEV("button",{type:"submit",disabled:X,className:"flex-1 btn-primary disabled:opacity-50",children:X?"جاري الإنشاء...":"إنشاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:480,columnNumber:17},this),u.jsxDEV("button",{type:"button",onClick:()=>{q(!1),J({userId:"",commissionRate:10,notes:""})},className:"flex-1 btn-secondary",children:"إلغاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:487,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:479,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:424,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:422,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:421,columnNumber:9},this),z&&$&&u.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-4 md:p-6",children:[u.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[u.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:["إحصائيات ",$.agentNumber]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:508,columnNumber:15},this),u.jsxDEV("button",{onClick:()=>{F(!1),G(null),M(null)},className:"text-gray-400 hover:text-gray-600",children:u.jsxDEV(D,{className:"text-xl"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:519,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:511,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:507,columnNumber:13},this),Z?u.jsxDEV("div",{className:"flex items-center justify-center py-12",children:u.jsxDEV(g,{className:"animate-spin text-xl text-primary-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:525,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:524,columnNumber:15},this):K?u.jsxDEV("div",{className:"space-y-6",children:[u.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxDEV("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsxDEV("p",{className:"text-xs text-blue-600 mb-1",children:"العملاء"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:532,columnNumber:21},this),u.jsxDEV("p",{className:"text-xl font-bold text-blue-900",children:K.totalCustomers||0},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:533,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:531,columnNumber:19},this),u.jsxDEV("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsxDEV("p",{className:"text-xs text-green-700 mb-1",children:"الطلبات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:538,columnNumber:21},this),u.jsxDEV("p",{className:"text-xl font-bold text-green-900",children:K.totalOrders||0},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:539,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:537,columnNumber:19},this),u.jsxDEV("div",{className:"bg-purple-50 p-4 rounded-lg",children:[u.jsxDEV("p",{className:"text-xs text-purple-400 mb-1",children:"المبيعات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:544,columnNumber:21},this),u.jsxDEV("p",{className:"text-xl font-bold text-purple-900",children:f(K.totalSales||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:545,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:543,columnNumber:19},this),u.jsxDEV("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[u.jsxDEV("p",{className:"text-xs text-yellow-700 mb-1",children:"المستحق"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:550,columnNumber:21},this),u.jsxDEV("p",{className:"text-xl font-bold text-yellow-900",children:f((null==(e=K.payments)?void 0:e.totalPending)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:551,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:549,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:530,columnNumber:17},this),u.jsxDEV("div",{className:"border-t pt-4",children:[u.jsxDEV("h3",{className:"font-bold mb-3",children:"العمولات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:559,columnNumber:19},this),u.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"text-xs text-gray-500",children:"الإجمالي"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:562,columnNumber:23},this),u.jsxDEV("p",{className:"font-semibold",children:f((null==(s=K.commissions)?void 0:s.total)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:563,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:561,columnNumber:21},this),u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"text-xs text-gray-500",children:"معلقة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:568,columnNumber:23},this),u.jsxDEV("p",{className:"font-semibold text-yellow-600",children:f((null==(a=K.commissions)?void 0:a.pending)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:569,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:567,columnNumber:21},this),u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"text-xs text-gray-500",children:"مدفوعة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:574,columnNumber:23},this),u.jsxDEV("p",{className:"font-semibold text-green-600",children:f((null==(i=K.commissions)?void 0:i.paid)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:575,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:573,columnNumber:21},this),u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"text-xs text-gray-500",children:"عدد العمولات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:580,columnNumber:23},this),u.jsxDEV("p",{className:"font-semibold",children:(null==(m=K.commissions)?void 0:m.count)||0},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:581,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:579,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:560,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:558,columnNumber:17},this),u.jsxDEV("div",{className:"border-t pt-4",children:[u.jsxDEV("h3",{className:"font-bold mb-3",children:"المدفوعات"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:588,columnNumber:19},this),u.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"text-xs text-gray-500",children:"المستحق"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:591,columnNumber:23},this),u.jsxDEV("p",{className:"font-semibold text-yellow-600",children:f((null==(n=K.payments)?void 0:n.totalPending)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:592,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:590,columnNumber:21},this),u.jsxDEV("div",{children:[u.jsxDEV("p",{className:"text-xs text-gray-500",children:"المدفوع"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:597,columnNumber:23},this),u.jsxDEV("p",{className:"font-semibold text-green-600",children:f((null==(l=K.payments)?void 0:l.totalPaid)||0,"SAR")},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:598,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:596,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:589,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:587,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:528,columnNumber:15},this):u.jsxDEV("div",{className:"text-center py-12 text-gray-500",children:"لا توجد إحصائيات متاحة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:606,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:506,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:505,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/admin/Agents.jsx",lineNumber:172,columnNumber:5},this)}export{w as default};
