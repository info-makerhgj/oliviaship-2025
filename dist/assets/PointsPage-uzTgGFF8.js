import{I as e,j as s,J as a,l,r as i,t as r,x as o,f as c,K as t,a as n}from"./index-Ctx_GovF.js";import{r as m}from"./react-vendor-DBmefE3i.js";import"./icons-DYE8NDaX.js";import"./utils-CZ_YNEkO.js";function u(){var u,d,N,b,p,g;const[x,h]=m.useState([]),[j,y]=m.useState(!0),[P,v]=m.useState(""),[D,f]=m.useState("all"),[w,C]=m.useState("all"),[E,U]=m.useState(null),[V,S]=m.useState(!1);m.useEffect(()=>{_()},[D,w]);const _=()=>{return s=this,a=null,l=function*(){try{y(!0);const s={};"all"!==D&&(s.city=D),"all"!==w&&(s.type=w);const a=yield e.getPublic(s);h(a.data.points||[]),S(!0)}catch(s){}finally{y(!1)}},new Promise((e,i)=>{var r=e=>{try{c(l.next(e))}catch(s){i(s)}},o=e=>{try{c(l.throw(e))}catch(s){i(s)}},c=s=>s.done?e(s.value):Promise.resolve(s.value).then(r,o);c((l=l.apply(s,a)).next())});var s,a,l},$=x.filter(e=>{var s,a,l,i,r,o;if(!P)return!0;const c=P.toLowerCase();return(null==(s=e.name)?void 0:s.toLowerCase().includes(c))||(null==(l=null==(a=e.location)?void 0:a.address)?void 0:l.toLowerCase().includes(c))||(null==(r=null==(i=e.location)?void 0:i.city)?void 0:r.toLowerCase().includes(c))||(null==(o=e.code)?void 0:o.toLowerCase().includes(c))}),k=[...new Set(x.map(e=>{var s;return null==(s=e.location)?void 0:s.city}).filter(Boolean))],F=[...new Set(["صنعاء","عدن","تعز","إب","الحديدة","المكلا","مأرب","الجوف","حجة","ذمار","الضالع","لحج","أبين","شبوة","حضرموت","المهرة","سقطرى","بيحان","يريم","زنجبار","البيضاء","عمران","صعدة","ريمة",...k])].sort(),L=e=>{switch(e){case"both":return s.jsxDEV(s.Fragment,{children:[s.jsxDEV(n,{className:"inline ml-1"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:60,columnNumber:18},this),s.jsxDEV(t,{className:"inline ml-1"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:60,columnNumber:59},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:60,columnNumber:16},this);case"pickup_only":return s.jsxDEV(n,{className:"inline ml-1"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:62,columnNumber:16},this);case"codes_only":return s.jsxDEV(t,{className:"inline ml-1"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:64,columnNumber:16},this);default:return null}},z=e=>{switch(e){case"both":return"استلام + أكواد";case"pickup_only":return"استلام فقط";case"codes_only":return"أكواد فقط";default:return"غير محدد"}};return s.jsxDEV("div",{className:"min-h-screen bg-gray-50 py-6 md:py-8",children:s.jsxDEV("div",{className:"container mx-auto px-4",children:[s.jsxDEV("div",{className:"mb-6 md:mb-8 text-center",children:[s.jsxDEV("h1",{className:"text-2xl md:text-3xl font-bold text-gradient mb-2",children:"نقاط البيع والتسليم"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:88,columnNumber:11},this),s.jsxDEV("p",{className:"text-gray-600 text-sm md:text-base",children:"اعثر على أقرب نقطة لك لاستلام طلباتك أو شراء أكواد الشحن"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:89,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:87,columnNumber:9},this),s.jsxDEV("div",{className:"card mb-6",children:s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxDEV("div",{className:"md:col-span-2",children:s.jsxDEV("div",{className:"relative",children:[s.jsxDEV(a,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:98,columnNumber:17},this),s.jsxDEV("input",{type:"text",value:P,onChange:e=>v(e.target.value),placeholder:"ابحث عن نقطة...",className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:99,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:97,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:96,columnNumber:13},this),s.jsxDEV("div",{children:s.jsxDEV("select",{value:D,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[s.jsxDEV("option",{value:"all",children:"جميع المدن"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:116,columnNumber:17},this),F.map(e=>s.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:118,columnNumber:19},this))]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:111,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:110,columnNumber:13},this),s.jsxDEV("div",{children:s.jsxDEV("select",{value:w,onChange:e=>C(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[s.jsxDEV("option",{value:"all",children:"جميع الأنواع"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:130,columnNumber:17},this),s.jsxDEV("option",{value:"both",children:"استلام + أكواد"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:131,columnNumber:17},this),s.jsxDEV("option",{value:"pickup_only",children:"استلام فقط"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:132,columnNumber:17},this),s.jsxDEV("option",{value:"codes_only",children:"أكواد فقط"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:133,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:125,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:124,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:94,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:93,columnNumber:9},this),j?s.jsxDEV("div",{className:"flex items-center justify-center py-20",children:s.jsxDEV(l,{className:"animate-spin text-xl md:text-2xl text-primary-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:141,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:140,columnNumber:11},this):0===$.length?s.jsxDEV("div",{className:"card text-center py-16",children:[s.jsxDEV(i,{className:"text-3xl md:text-4xl text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:145,columnNumber:13},this),s.jsxDEV("p",{className:"text-sm md:text-base text-gray-600 mb-2",children:"لا توجد نقاط متاحة"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:146,columnNumber:13},this),s.jsxDEV("p",{className:"text-gray-500",children:"جرب تغيير الفلاتر أو البحث"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:147,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:144,columnNumber:11},this):s.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxDEV("div",{className:"space-y-4",children:$.map(e=>{var a,l,t,n;return s.jsxDEV("div",{className:"card p-4 cursor-pointer transition-all hover:shadow-lg "+((null==E?void 0:E._id)===e._id?"ring-2 ring-primary-500":""),onClick:()=>U(e),children:[s.jsxDEV("div",{className:"flex items-start justify-between mb-3",children:s.jsxDEV("div",{className:"flex-1",children:[s.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxDEV("h3",{className:"text-lg font-bold text-gray-900",children:e.name},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:164,columnNumber:25},this),s.jsxDEV("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium flex items-center gap-1",children:[s.jsxDEV(r,{className:"text-xs"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:166,columnNumber:27},this),"نشطة"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:165,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:163,columnNumber:23},this),s.jsxDEV("div",{className:"flex items-center gap-2 mb-2 text-sm text-gray-600",children:[s.jsxDEV(i,{className:"text-primary-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:171,columnNumber:25},this),s.jsxDEV("span",{children:null==(a=e.location)?void 0:a.address},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:172,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:170,columnNumber:23},this),s.jsxDEV("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[s.jsxDEV("span",{children:null==(l=e.location)?void 0:l.city},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:175,columnNumber:25},this),e.code&&s.jsxDEV("span",{className:"font-mono",children:["#",e.code]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:176,columnNumber:40},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:174,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:162,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:161,columnNumber:19},this),s.jsxDEV("div",{className:"flex flex-wrap items-center gap-3 mt-3 pt-3 border-t border-gray-200",children:[s.jsxDEV("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 rounded text-xs font-medium",children:[z(e.type),L(e.type)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:182,columnNumber:21},this),(null==(t=e.contact)?void 0:t.phone)&&s.jsxDEV("a",{href:`tel:${e.contact.phone}`,className:"flex items-center gap-1 text-xs text-gray-600 hover:text-primary-600",children:[s.jsxDEV(o,{className:"text-xs"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:191,columnNumber:25},this),e.contact.phone]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:187,columnNumber:23},this),(null==(n=e.contact)?void 0:n.whatsapp)&&s.jsxDEV("a",{href:`https://wa.me/${e.contact.whatsapp.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-green-600 hover:text-green-700",children:"واتساب"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:196,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:181,columnNumber:19},this),e.operatingHours&&s.jsxDEV("div",{className:"mt-3 pt-3 border-t border-gray-200 flex items-center gap-2 text-xs text-gray-500",children:[s.jsxDEV(c,{},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:210,columnNumber:23},this),s.jsxDEV("span",{children:[e.operatingHours.from," - ",e.operatingHours.to]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:211,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:209,columnNumber:21},this)]},e._id,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:154,columnNumber:17},this)})},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:152,columnNumber:13},this),s.jsxDEV("div",{className:"lg:sticky lg:top-6 lg:h-[calc(100vh-3rem)]",children:s.jsxDEV("div",{className:"card p-0 overflow-hidden h-full",children:[s.jsxDEV("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:s.jsxDEV("h3",{className:"font-bold text-gray-700 flex items-center gap-2",children:[s.jsxDEV(i,{className:"text-primary-600"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:225,columnNumber:21},this),"الخريطة"]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:224,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:223,columnNumber:17},this),s.jsxDEV("div",{className:"relative w-full h-[400px] lg:h-[calc(100%-60px)]",children:E&&(null==(d=null==(u=E.location)?void 0:u.coordinates)?void 0:d.latitude)&&(null==(b=null==(N=E.location)?void 0:N.coordinates)?void 0:b.longitude)?s.jsxDEV(s.Fragment,{children:[s.jsxDEV("iframe",{width:"100%",height:"100%",style:{border:0},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps?q=${E.location.coordinates.latitude},${E.location.coordinates.longitude}&output=embed&zoom=15`},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:232,columnNumber:23},this),s.jsxDEV("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-lg p-2",children:s.jsxDEV("a",{href:`https://www.google.com/maps/search/?api=1&query=${E.location.coordinates.latitude},${E.location.coordinates.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary-600 hover:text-primary-700 flex items-center gap-1",children:"فتح في خرائط Google"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:242,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:241,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:231,columnNumber:21},this):$.length>0&&(null==(g=null==(p=$[0].location)?void 0:p.coordinates)?void 0:g.latitude)?s.jsxDEV(s.Fragment,{children:s.jsxDEV("iframe",{width:"100%",height:"100%",style:{border:0},loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps?q=${$[0].location.coordinates.latitude},${$[0].location.coordinates.longitude}&output=embed&zoom=12`},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:254,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:253,columnNumber:21},this):s.jsxDEV("div",{className:"flex items-center justify-center h-full bg-gray-100",children:s.jsxDEV("div",{className:"text-center",children:[s.jsxDEV(i,{className:"text-2xl md:text-3xl text-gray-300 mx-auto mb-2"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:267,columnNumber:25},this),s.jsxDEV("p",{className:"text-gray-500 text-sm",children:"اختر نقطة لعرض موقعها"},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:268,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:266,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:265,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:229,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:222,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:221,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:150,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:85,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/cct33/Downloads/2yam/src/pages/public/PointsPage.jsx",lineNumber:84,columnNumber:5},this)}export{u as default};
