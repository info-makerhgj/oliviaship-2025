# ๐ ุชุญููู ุดุงูู ูููุดุฑูุน ููุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุดุฑูุน

ูุฐุง ูุดุฑูุน **ููุตุฉ ุชูุตูู ุนุงูููุฉ** ููุนููุงุก ูู ุงููููุ ูุจูู ุจุงุณุชุฎุฏุงู:
- **Backend**: Node.js + Express + MongoDB
- **Frontend**: React + Vite + Tailwind CSS
- **Database**: MongoDB (Mongoose)

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช (MongoDB)

### ุทุฑููุฉ ุงูุงุชุตุงู

ูุชู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ููู `server/index.js`:

```javascript
mongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost:27017/yemen-delivery')
```

**ุงููุชุบูุฑุงุช ุงููุทููุจุฉ ูู `.env`:**
- `MONGODB_URI`: ุฑุงุจุท ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
  - ูุญูู: `mongodb://localhost:27017/yemen-delivery`
  - ุณุญุงุจู (Atlas): `mongodb+srv://username:password@cluster.mongodb.net/yemen-delivery`

### ุงูููุงุฐุฌ (Models) ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### 1. **User** - ุงููุณุชุฎุฏููู
- ุงูุญููู ุงูุฑุฆูุณูุฉ:
  - `name`, `email`, `password` (ูุดูุฑุฉ)
  - `role`: customer, admin, purchasing, shipping, support, agent
  - `address`: ุงูุนููุงู ุงููุงูู
  - `stats`: ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏู (ุนุฏุฏ ุงูุทูุจุงุชุ ุฅุฌูุงูู ุงูุฅููุงู)
  - `preferences`: ุงููุบุฉุ ุงูุนููุฉุ ุงูุฅุดุนุงุฑุงุช

#### 2. **Order** - ุงูุทูุจุงุช
- ุงูุญููู ุงูุฑุฆูุณูุฉ:
  - `orderNumber`: ุฑูู ุงูุทูุจ ุงููุฑูุฏ
  - `user`: ุฑุงุจุท ูููุณุชุฎุฏู
  - `product`: ูุนูููุงุช ุงูููุชุฌ (URL, ุงุณู, ุณุนุฑ, ูููุฉ)
  - `pricing`: ุชูุงุตูู ุงูุชุณุนูุฑ (ุณุนุฑ ุงูููุชุฌุ ุงูุดุญูุ ุงูุนูููุฉุ ุงูุฌูุงุฑูุ ุฅูุฎ)
  - `status`: pending, confirmed, processing, purchased, shipped, in_transit, arrived, delivered, cancelled
  - `statusHistory`: ุณุฌู ุงูุชุบููุฑุงุช
  - `payment`: ูุนูููุงุช ุงูุฏูุน
  - `delivery`: ูุนูููุงุช ุงูุชูุตูู (ููุฒู ุฃู ููุทุฉ ุงุณุชูุงู)

#### 3. **Cart** - ุงูุณูุฉ ุงูุฐููุฉ
- ุชุฎุฒูู ุงูููุชุฌุงุช ุงูุชู ูุถูููุง ุงููุณุชุฎุฏู ูุจู ุงูุทูุจ

#### 4. **SmartCartOrder** - ุทูุจุงุช ุงูุณูุฉ ุงูุฐููุฉ
- ุทูุจุงุช ููุชููุฉ ูู ุงูุณูุฉ

#### 5. **Product** - ุงูููุชุฌุงุช
- ูุนูููุงุช ุงูููุชุฌุงุช ุงููุทููุจุฉ

#### 6. **Payment** - ุงููุฏููุนุงุช
- ุณุฌู ุฌููุน ุงููุฏููุนุงุช

#### 7. **Shipment** - ุงูุดุญูุงุช
- ูุนูููุงุช ุงูุดุญูุงุช

#### 8. **Agent** - ุงููููุงุก
- ูุนูููุงุช ุงููููุงุก

#### 9. **AgentCustomer** - ุนููุงุก ุงููููุงุก
- ุนููุงุก ูุฑุชุจุทูู ุจูููุงุก

#### 10. **AgentOrder** - ุทูุจุงุช ุงููููุงุก
- ุทูุจุงุช ูู ุงููููุงุก

#### 11. **AgentCommission** - ุนูููุงุช ุงููููุงุก
- ุญุณุงุจ ุงูุนูููุงุช ูููููุงุก

#### 12. **PointOfSale** - ููุงุท ุงูุจูุน
- ููุงุท ุงุณุชูุงู ุงูุทูุจุงุช

#### 13. **PointCommission** - ุนูููุงุช ููุงุท ุงูุจูุน
- ุนูููุงุช ููุงุท ุงูุจูุน

#### 14. **Wallet** - ุงููุญุงูุธ
- ูุญุงูุธ ุงููุณุชุฎุฏููู ุงูุฑูููุฉ

#### 15. **WalletCode** - ุฃููุงุฏ ุงููุญุงูุธ
- ุฃููุงุฏ ูุงุจูุฉ ููุงุณุชุจุฏุงู ูู ุงููุญุงูุธ

#### 16. **CodeDistribution** - ุชูุฒูุน ุงูุฃููุงุฏ
- ุชูุฒูุน ุงูุฃููุงุฏ ุนูู ููุงุท ุงูุจูุน

#### 17. **Coupon** - ุงูููุจููุงุช
- ููุจููุงุช ุงูุฎุตู

#### 18. **Notification** - ุงูุฅุดุนุงุฑุงุช
- ุฅุดุนุงุฑุงุช ุงููุณุชุฎุฏููู

#### 19. **Settings** - ุงูุฅุนุฏุงุฏุงุช
- ุฅุนุฏุงุฏุงุช ุงููุธุงู ุงูุนุงูุฉ

---

## ๐ฃ๏ธ ุงููุณุงุฑุงุช (Routes) - API Endpoints

### 1. **Authentication** - `/api/auth`
- `POST /register` - ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- `POST /login` - ุชุณุฌูู ุงูุฏุฎูู
- `GET /me` - ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู (ูุญูู)
- `PUT /profile` - ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู (ูุญูู)
- `PUT /change-password` - ุชุบููุฑ ูููุฉ ุงููุฑูุฑ (ูุญูู)

### 2. **Orders** - `/api/orders`
- `POST /` - ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ (ูุญูู)
- `GET /` - ุฌููุน ุงูุทูุจุงุช (ูุญูู)
- `GET /:id` - ุทูุจ ูุญุฏุฏ (ูุญูู)
- `PUT /:id/status` - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ (ูุญูู + admin)
- `PUT /:id/assign-point` - ุชุนููู ููุทุฉ ุจูุน (ูุญูู + admin)
- `GET /track/:orderNumber` - ุชุชุจุน ุทูุจ (ุนุงู)

### 3. **Products** - `/api/products`
- `POST /fetch-from-url` - ุฌูุจ ุจูุงูุงุช ููุชุฌ ูู ุฑุงุจุท (ูุญูู)
- `POST /calculate-cost` - ุญุณุงุจ ุชูููุฉ ุงูููุชุฌ (ูุญูู)
- `POST /validate-url` - ุงูุชุญูู ูู ุตุญุฉ ุงูุฑุงุจุท (ุนุงู)

### 4. **Cart** - `/api/cart`
- `GET /` - ุงูุญุตูู ุนูู ุงูุณูุฉ (ูุญูู)
- `POST /fetch-and-add` - ุฌูุจ ูุฅุถุงูุฉ ููุชุฌ (ูุญูู)
- `PUT /items/:itemId/quantity` - ุชุญุฏูุซ ุงููููุฉ (ูุญูู)
- `PUT /items/:itemId/options` - ุชุญุฏูุซ ุฎูุงุฑุงุช ุงูููุชุฌ (ูุญูู)
- `DELETE /items/:itemId` - ุญุฐู ููุชุฌ (ูุญูู)
- `DELETE /clear` - ุชูุฑูุบ ุงูุณูุฉ (ูุญูู)
- `POST /checkout` - ุฅุชูุงู ุงูุทูุจ (ูุญูู)

### 5. **Smart Cart Orders** - `/api/smart-cart-orders`
- ุทูุจุงุช ููุชููุฉ ูู ุงูุณูุฉ ุงูุฐููุฉ

### 6. **Users** - `/api/users`
- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (Admin only)

### 7. **Payments** - `/api/payments`
- ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช

### 8. **Shipments** - `/api/shipments`
- ุฅุฏุงุฑุฉ ุงูุดุญูุงุช

### 9. **Notifications** - `/api/notifications`
- ุงูุฅุดุนุงุฑุงุช

### 10. **Settings** - `/api/settings`
- ุฅุนุฏุงุฏุงุช ุงููุธุงู

### 11. **Stats** - `/api/stats`
- ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ

### 12. **Coupons** - `/api/coupons`
- ุฅุฏุงุฑุฉ ุงูููุจููุงุช

### 13. **Stripe** - `/api/stripe`
- ุงูุฏูุน ุนุจุฑ Stripe

### 14. **Wallet** - `/api/wallet`
- `GET /` - ุงููุญูุธุฉ ุงูุฎุงุตุฉ (ูุญูู)
- `GET /transactions` - ุงููุนุงููุงุช (ูุญูู)
- `POST /redeem-code` - ุงุณุชุจุฏุงู ููุฏ (ูุญูู)
- `GET /all` - ุฌููุน ุงููุญุงูุธ (admin)
- `POST /codes` - ุฅูุดุงุก ููุฏ ูุญูุธุฉ (admin)
- `GET /codes` - ุฌููุน ุงูุฃููุงุฏ (admin)
- `POST /adjust` - ุชุนุฏูู ุงูุฑุตูุฏ (admin)

### 15. **Point of Sale** - `/api/pos`
- `GET /public` - ููุงุท ุงูุจูุน ุงูุนุงูุฉ (ุนุงู)
- `GET /nearest` - ุฃูุฑุจ ุงูููุงุท (ูุญูู)
- `GET /code/:code` - ููุทุฉ ุจูุน ุจุงูููุฏ (ุนุงู)
- `POST /` - ุฅูุดุงุก ููุทุฉ (admin)
- `GET /` - ุฌููุน ุงูููุงุท (ูุญูู)
- `GET /my-point` - ููุทุชู (ูุญูู)
- `GET /:id` - ููุทุฉ ูุญุฏุฏุฉ (ูุญูู)
- `PUT /:id` - ุชุญุฏูุซ ููุทุฉ (ูุญูู)
- `GET /:id/codes` - ุฃููุงุฏ ุงูููุทุฉ (ูุญูู)
- `GET /:id/orders` - ุทูุจุงุช ุงูููุทุฉ (ูุญูู)
- `POST /:id/sell-code` - ุจูุน ููุฏ ููุนููู (ูุญูู)
- `POST /:id/return-code` - ุฅุฑุฌุงุน ููุฏ (ูุญูู)
- `POST /:id/request-codes` - ุทูุจ ุฃููุงุฏ (ูุญูู)
- `PUT /:id/orders/:orderId/ready` - ุชุนููู ุทูุจ ุฌุงูุฒ (ูุญูู)
- `GET /:id/stats` - ุฅุญุตุงุฆูุงุช ุงูููุทุฉ (ูุญูู)

### 16. **Agents** - `/api/agents`
- `GET /me` - ูููู ููููู (ูุญูู)
- `GET /payments/all` - ุฌููุน ูุฏููุนุงุช ุงููููุงุก (admin)
- `GET /payments/stats` - ุฅุญุตุงุฆูุงุช ูุฏููุนุงุช ุงููููุงุก (admin)
- `POST /` - ุฅูุดุงุก ูููู (admin)
- `GET /` - ุฌููุน ุงููููุงุก (admin)
- `GET /:id` - ูููู ูุญุฏุฏ (ูุญูู)
- `PUT /:id` - ุชุญุฏูุซ ูููู (admin)
- `PATCH /:id/toggle-status` - ุชูุนูู/ุชุนุทูู ูููู (admin)
- `DELETE /:id` - ุญุฐู ูููู (admin)
- `GET /:id/stats` - ุฅุญุตุงุฆูุงุช ูููู (ูุญูู)
- `POST /:agentId/customers` - ุฅูุดุงุก ุนููู (ูุญูู)
- `GET /:agentId/customers` - ุนููุงุก ูููู (ูุญูู)
- `POST /:agentId/orders` - ุฅูุดุงุก ุทูุจ (ูุญูู)
- `GET /:agentId/orders` - ุทูุจุงุช ูููู (ูุญูู)
- `POST /:agentId/orders/batch-submit` - ุฅุฑุณุงู ุทูุจุงุช ูุฌูุนุฉ (ูุญูู)

---

## ๐ ููู ูุนูู ุงููุธุงู

### 1. **ุนูููุฉ ุงูุทูุจ**
```
ุงููุณุชุฎุฏู โ ูุถูู ุฑุงุจุท ููุชุฌ โ ุงููุธุงู ูุฌูุจ ุงูุจูุงูุงุช โ ูุญุณุจ ุงูุชูููุฉ โ ููุดุฆ ุทูุจ โ ูุฏูุน โ ูุชุงุจุน ุงูุทูุจ
```

### 2. **ุงูุณูุฉ ุงูุฐููุฉ**
```
ุงููุณุชุฎุฏู โ ูุถูู ููุชุฌุงุช ููุณูุฉ โ ูุนุฏู ุงููููุงุช โ ูุทุจู ููุจูู โ ูููู ุงูุทูุจ
```

### 3. **ูุธุงู ุงููููุงุก**
```
ุงููููู โ ููุดุฆ ุนููุงุก โ ูุถูู ุทูุจุงุช ููู โ ูุฏูุน ุงูุนููู โ ูุฑุณู ุงูุทูุจุงุช โ ูุญุตู ุนูู ุนูููุฉ
```

### 4. **ููุงุท ุงูุจูุน**
```
ุงูููุทุฉ โ ุชุณุชูู ุฃููุงุฏ ูุญูุธุฉ โ ุชุจูุนูุง ููุนููุงุก โ ุชุณุชูู ุทูุจุงุช โ ุชุนุฏ ุงูุทูุจุงุช โ ุงูุนููุงุก ูุณุชูููู
```

### 5. **ุงููุญุงูุธ ุงูุฑูููุฉ**
```
ุงููุฏูุฑ โ ููุดุฆ ุฃููุงุฏ ูุญูุธุฉ โ ููุฒุนูุง ุนูู ุงูููุงุท โ ุงูููุงุท ุชุจูุนูุง โ ุงูุนููุงุก ูุณุชุฎุฏููููุง ููุฏูุน
```

---

## ๐ ููููุฉ ุชุดุบูู ุงููุดุฑูุน

### 1. ุงูุชุฃูุฏ ูู ุงููุชุทูุจุงุช
- Node.js 18+
- MongoDB ูุญูู ุฃู Atlas

### 2. ุชุซุจูุช ุงูุญุฒู
```bash
npm install
```

### 3. ุฅุนุฏุงุฏ ููู `.env`
ุชุฃูุฏ ูู ูุฌูุฏ:
- `MONGODB_URI` - ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `JWT_SECRET` - ููุชุงุญ ุงูุชุดููุฑ
- `PORT` - ุงููููุฐ (ุงูุชุฑุงุถู 5000)

### 4. ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
**ูุญูู:**
```bash
mongod
```

**ุฃู ุงุณุชุฎุฏู MongoDB Atlas (ุณุญุงุจู)**

### 5. ุชุดุบูู ุงููุดุฑูุน
```bash
# ุชุดุบูู Backend ู Frontend ูุนุงู
npm run dev

# ุฃู ุชุดุบูู ูู ูุงุญุฏ ุนูู ุญุฏู:
npm run server  # Backend ููุท
npm run client  # Frontend ููุท
```

### 6. ุงููุตูู ูููููุน
- Frontend: http://localhost:5173
- Backend API: http://localhost:5000
- Health Check: http://localhost:5000/api/health

---

## ๐ ูุธุงู ุงููุตุงุฏูุฉ

### ููู ูุนูู:
1. ุงููุณุชุฎุฏู ูุณุฌู/ูุฏุฎู
2. ุงููุธุงู ูุชุญูู ูู ุงูุจูุงูุงุช
3. ููุดุฆ JWT Token
4. ุงูุนููู ูุฑุณู Token ูู Header: `Authorization: Bearer <token>`
5. Middleware `protect` ูุชุญูู ูู Token
6. Middleware `admin` ูุชุญูู ูู ุงูุตูุงุญูุงุช

### ุงูุญูุงูุฉ:
- ูููุงุช ุงููุฑูุฑ ูุดูุฑุฉ ุจู bcrypt
- JWT Tokens ููุฌูุณุงุช
- Rate Limiting ููุญูุงูุฉ ูู ุงููุฌูุงุช
- CORS ูุญุฏูุฏ

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: MongoDB ุชุณุชุฎุฏู Mongoose ODM
2. **ุงููููุฐ**: 5000 ููู Backendุ 5173 ููู Frontend
3. **ุงูุจูุฆุฉ**: `.env` ูุญุชูู ุนูู ุงูุฅุนุฏุงุฏุงุช ุงูุญุณุงุณุฉ
4. **ุงูุตูุงุญูุงุช**: ูุธุงู ูุชุนุฏุฏ ุงููุณุชููุงุช (customer, admin, agent, etc.)
5. **ุงูุชุชุจุน**: ูู ุทูุจ ูู `statusHistory` ูุชุชุจุน ุงูุชุบููุฑุงุช
6. **ุงูุฃูุงู**: Rate limiting, CORS, Helmet, Password hashing

---

## ๐๏ธ ุฃูุงูุฑ ูููุฏุฉ

```bash
# ุชุดุบูู ุงููุดุฑูุน
npm run dev

# ุชุดุบูู ุงูุณูุฑูุฑ ููุท
npm run server

# ุชุดุบูู ุงููุงุฌูุฉ ููุท
npm run client

# ุจูุงุก ุงููุดุฑูุน
npm run build

# ุชุดุบูู seed (ุฅูุดุงุก ุจูุงูุงุช ุชุฌุฑูุจูุฉ)
node server/seed.js
```

---

## โ ุงูุชุญูู ูู ุงูุชุดุบูู

1. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ุชุฃูุฏ ูู ุชุดุบูู MongoDB
2. **ุงููููุงุช**: ุชุฃูุฏ ูู ูุฌูุฏ `.env` ูุน ุงูุฅุนุฏุงุฏุงุช
3. **ุงูุญุฒู**: ุชุฃูุฏ ูู ุชุซุจูุช `node_modules`
4. **ุงูููุงูุฐ**: ุชุฃูุฏ ูู ุฃู 5000 ู 5173 ุบูุฑ ูุณุชุฎุฏูุฉ
5. **ุงูุงุฎุชุจุงุฑ**: ุงูุชุญ http://localhost:5000/api/health

---

ุชู ุฅูุดุงุก ูุฐุง ุงูุชุญููู ุจุชุงุฑูุฎ: {{ current_date }}






